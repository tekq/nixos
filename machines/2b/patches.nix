{lib, ...}:

# ‚ö†Ô∏è This module is pretty dirty right now! It contains a lot of lies and some
# truth you can get ideas from.

# Fallout patches are those that were only used to unset options that became
# unused or conflicted with the calculated sets

# There is some attempt to make patches either addition or subtraction since
# this helps merging.

rec {
  # separating out choices that every kernel should have
  base = [
    user-friendly
    small
    zstd-all
    no-sec
    no-old
    no-rare
    no-debug
    no-fun
    no-intel
    no-unused-crypto
    not-vm

    base-fallout
  ];

  # This set is for the additive workflow, building up from tinyconfig
  # ‚ö†Ô∏è NOT YET WORKING
  addition = [
    streamlined

    peripherals-usb # stub for common usb
    peripherals-misc # stub for common other
    peripherals-video # stub for external monitors

    # Subtract unused options added by NixOS
    localmod-unused-net-vendors
    localmod-unused-snd
    localmod-unused-video

    # Cleaning up dependent settings.  These can change depending on changes to
    # other patches.  It is annoying to keep them in sync, and it is a good idea
    # to keep them together.
    addition-fallout
  ];

  # Subtraction strategy, starting from defconfig and NixOS defaults, reduced
  # with localmodconfig.
  subtract = [

    localmod-unused-drm
    localmod-unused-gpio
    localmod-unused-ir
    localmod-unused-media
    # TODO check if NixOS turns these on
    # localmod-unused-mfd
    localmod-unused-net-vendors
    localmod-unused-regulators
    localmod-unused-rtc
    localmod-unused-sensors
    localmod-unused-snd
    localmod-unused-video
    localmod-unused-wifi

    # Cleaning up dependent settings.  These can change depending on changes to
    # other patches.  It is annoying to keep them in sync, and it is a good idea
    # to keep them together.
    subtract-fallout
  ];

  # It must be noted that kernel configuration, with a tree menu for
  # something like 4k options, is not user friendly ;-)
  user-friendly = {
    name = "user-friendly";
    patch = null;
    extraStructuredConfig = with lib.kernel; {  
      # Give us the config back at /proc/config.gz so we can modify it!
      # On by default, just pointing it out
      IKCONFIG = lib.mkForce yes;
      IKCONFIG_PROC = lib.mkForce yes;
      
      IKHEADERS = lib.mkForce unset;

      # Leniant
      # Complain, but don't fail.  This option makes a lot of
      # sense because not every module will even be run and
      # even if we suspect a module might be broken, unless
      # we are kernel devs, we generally will take the risk
      # that it works.
      # WERROR = no;

      # Generally this one will save you from problems because the wrapped clang
      # compiler generates a lot of warnings... and then fails ;-)
      # CC_NO_UNUSED_ARGS_WARNINGS = yes;

      # Haven't found a need for this, but could come in handy
      # SECTION_MISMATCH_WARN_ONLY = yes;
    };
  };

  custom = {
    name = "custom";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      # Optional, neat for small user binaries, but they would all require recompile.
      # X86_X32_ABI = yes;

      # Stricter
      IO_STRICT_DEVMEM = yes;



      # TODO something else is setting this
      # X86_AMD_FREQ_SENSITIVITY = lib.mkForce yes;
      CPU_FREQ_GOV_ONDEMAND = module;
      CPU_FREQ_GOV_CONSERVATIVE = module;

      # PREEMPT = yes;
      LRU_GEN = yes;
 
      MQ_IOSCHED_KYBER = lib.mkForce no;
      MQ_IOSCHED_DEADLINE = lib.mkForce no;

      # CONFIG_X86_MSR = lib.mkForce yes; # maybe we don't want this
    };
  };

  small = {
    name = "small";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      STRIP_ASM_SYMS = yes;
    };
  };

  not-vm = {
    name = "not-vm";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      KVM = lib.mkForce no;
      KVM_GUEST = lib.mkForce unset;
      MOUSE_PS2_VMMOUSE = lib.mkForce unset;
      # XEN = unset;
      HYPERV = unset;
      PARAVIRT_TIME_ACCOUNTING = lib.mkForce unset;
      HYPERVISOR_GUEST = lib.mkForce no;

      # fallout
      DRM_HYPERV = lib.mkForce unset;
      TDX_GUEST_DRIVER = lib.mkForce unset;
    };
  };

  zstd-all = {
    name = "zstd-all";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      ZRAM = lib.mkForce yes;
      ZRAM_BACKEND_LZ4 = lib.mkForce no;
      ZRAM_BACKEND_LZ4HC = lib.mkForce no;
      ZRAM_BACKEND_DEFLATE = lib.mkForce no;
      ZRAM_BACKEND_842 = lib.mkForce no;
      ZRAM_BACKEND_LZO = lib.mkForce no;
      ZRAM_BACKEND_ZSTD = lib.mkForce yes;
      ZRAM_MEMORY_TRACKING = yes;
      ZRAM_TRACK_ENTRY_ACTIME = yes;
      ZSWAP_DEFAULT_ON = yes;
      ZSWAP = yes;
    };
  };

  # This is actually a pretty useful patch that we could expand.
  # Any options that purely disable lots of old stuff should be known.
  no-old = {
    name = "no-old";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      # No slow / old filesystems (except boot)
      UDF_FS = lib.mkForce no;
      JFS_FS = lib.mkForce no;
      EXT2_FS = lib.mkForce no;      
      EXT3_FS = lib.mkForce no;
      GFS2_FS = lib.mkForce no;
      OCFS2_FS = lib.mkForce no;
      BTRFS_FS = lib.mkForce no;
      NILFS2_FS = lib.mkForce no;
      BCACHEFS_FS = lib.mkForce no;
      ZONEFS_FS = lib.mkForce no;
      MISC_FILESYSTEMS = lib.mkForce unset;
      NETWORK_FILESYSTEMS = lib.mkForce no;

      # some 3rd party programs may be 32-bit compiled.  But these days, few.
      IA32_EMULATION = lib.mkForce no;

      # No old disks
      SCSI = lib.mkForce no;
      # SCSI_COMMON = lib.mkForce no; # really wants this to be a module ü§∑
      ATA = lib.mkForce no;

      # No old USB
      USB_OHCI_HCD = lib.mkForce no;
      USB_UHCI_HCD = lib.mkForce no;

      # Parallel port
      PARPORT = lib.mkForce no;

      # No old graphics
      FB_VESA = lib.mkForce unset;

      # no CD ROM (will also limit reads of dual-use flash drive images?)
      # those images mainly need to be read by your EFI anyway
      ISO9660_FS = lib.mkForce no;

      X86_POWERNOW_K8 = lib.mkForce no;
      X86_ACPI_CPUFREQ_CPB = lib.mkForce no;
      AMD_NUMA = lib.mkForce no; # old Numa
      MTTR = lib.mkForce unset;

      ATALK = lib.mkForce no;

      ISA = lib.mkForce unset;
      ISAPNP = lib.mkForce unset;
      PNP = lib.mkForce unset;
      PCI_GO_ANY = lib.mkForce unset;
      PCI_QUIRKS = lib.mkForce no;
      TR = lib.mkForce unset;
      ARCNET = lib.mkForce no;
      FDDI = lib.mkForce no;
      # DLCI = lib.mkForce no;
      # FRAMERELAY = lib.mkForce no;
      MTD = lib.mkForce no;
      HID_GYRATION = lib.mkForce no;
      HID_SUNPLUS = lib.mkForce no;
      VIDEO_V4L1 = lib.mkForce unset;
      RADIO_ADAPTERS = lib.mkForce no;
      # DVB = lib.mkForce unset;
      I2O = lib.mkForce unset;
      IRDA = lib.mkForce unset;
      BT_HIDP = lib.mkForce no;
      BT_RFCOMM = lib.mkForce no;
      BT_BNEP = lib.mkForce no;
      NET_DSA_LEGACY = lib.mkForce unset;
      # PPP = lib.mkForce no; # already no
      SLIP = lib.mkForce unset;
      PLIP = lib.mkForce unset;
      NET_SB1000 = lib.mkForce unset;
      IEEE1394 = lib.mkForce unset;
      FB = lib.mkForce no;
      OLPC = lib.mkForce unset;
      # W1 = lib.mkForce no;
      X86_16BIT = lib.mkForce unset;

      RAPIDIO = lib.mkForce no;

      # Realtek?
      RTLWIFI = lib.mkForce unset;
      RTLWIFI_PCI = lib.mkForce unset;

      # old USB cameras
      USB_GSPCA = lib.mkForce no;

      # I mean, sure, if I'm consoling into a server rack
      USB_SERIAL = lib.mkForce no;
      USB_SERIAL_CONSOLE = lib.mkForce unset;
      USB_SERIAL_GENERIC = lib.mkForce unset;
    };
  };

  no-rare = {
    name = "no-rare";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      SURFACE_PLATFORMS = no;
      FIREWIRE = lib.mkForce no;
      MACINTOSH_DRIVERS = no;
      INFINIBAND = lib.mkForce no;
      ATM = lib.mkForce no;
      IIO = lib.mkForce no;
      SPEAKUP = lib.mkForce no;
      # TINYDRM = lib.mkForce no; # already unset
      RC_LOOPBACK = lib.mkForce no;
      RC_ATI_REMOTE = lib.mkForce no;
      RC_XBOX_DVD = lib.mkForce no;

      # said to be for testing only
      RCU_REF_SCALE_TEST = lib.mkForce no;
      SCF_TORTURE_TEST = lib.mkForce no;
      TEST_LOCKUP = lib.mkForce no;
      TEST_POWER = lib.mkForce no;
      THERMAL_CORE_TESTING = lib.mkForce no;

      X86_EXTENDED_PLATFORM = lib.mkForce no;

      CPU_SUP_HYGON = lib.mkForce unset;
      CPU_SUP_CENTAUR = lib.mkForce unset;
      CPU_SUP_ZHAOXIN = lib.mkForce unset;
    };
  };

  no-fun = {
    name = builtins.trace "loading patch: no-fun" "no-fun";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      INPUT_MISC = lib.mkForce no;
      INPUT_TOUCHSCREEN = lib.mkForce no;
      INPUT_TABLET = lib.mkForce no;
      INPUT_JOYSTICK = lib.mkForce no; # :-(
    };
  };

  no-intel = {
    name = builtins.trace "loading patch: no-intel" "no-intel";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      X86_INTEL_LPSS = lib.mkForce no;

      INTEL_ATOMISP2_PM = lib.mkForce no;
      INTEL_BYTCRC_PWRSRC = lib.mkForce no;
      INTEL_CHTDC_TI_PWRBTN = lib.mkForce no;
      INTEL_HFI_THERMAL = yes;
      INTEL_HID_EVENT = lib.mkForce no;
      INTEL_IDLE = yes;
      INTEL_IDMA64 = lib.mkForce no;
      INTEL_IDXD = lib.mkForce no;
      INTEL_IDXD_COMPAT = lib.mkForce no;
      INTEL_IFS = lib.mkForce no;
      INTEL_INT0002_VGPIO = lib.mkForce no;
      INTEL_IOATDMA = lib.mkForce no;
      # INTEL_IOMMU = module; # unused
      INTEL_IOMMU_DEFAULT_ON = lib.mkForce no;
      INTEL_IOMMU_FLOPPY_WA = yes;
      INTEL_IOMMU_PERF_EVENTS = yes;
      INTEL_IOMMU_SCALABLE_MODE_DEFAULT_ON = yes;
      INTEL_IOMMU_SVM = lib.mkForce no;
      INTEL_IPS = lib.mkForce no;
      INTEL_ISH_HID = lib.mkForce no;
      INTEL_LDMA = lib.mkForce no;
      INTEL_MEI = lib.mkForce no;
      INTEL_OAKTRAIL = lib.mkForce no;
      INTEL_OC_WATCHDOG = lib.mkForce no;
      INTEL_PCH_THERMAL = lib.mkForce no;
      INTEL_POWERCLAMP = lib.mkForce no;
      INTEL_PUNIT_IPC = lib.mkForce no;
      INTEL_RAPL = module;
      INTEL_RAPL_CORE = module;
      INTEL_RST = lib.mkForce no;
      INTEL_SAR_INT1092 = lib.mkForce no;
      INTEL_SCU_PCI = lib.mkForce no;
      INTEL_SCU_PLATFORM = lib.mkForce no;
      INTEL_SKL_INT3472 = lib.mkForce no;
      INTEL_SMARTCONNECT = lib.mkForce no;
      INTEL_SOC_DTS_THERMAL = lib.mkForce no;
      INTEL_SOC_PMIC = yes;
      INTEL_SOC_PMIC_CHTDC_TI = yes;
      INTEL_SOC_PMIC_CHTWC = yes;
      INTEL_SPEED_SELECT_INTERFACE = lib.mkForce no;
      INTEL_TCC_COOLING = lib.mkForce no;
      INTEL_TDX_GUEST = lib.mkForce unset;
      INTEL_THC_HID = lib.mkForce no;
      INTEL_TURBO_MAX_3 = yes;
      INTEL_TXT = lib.mkForce no;
      INTEL_UNCORE_FREQ_CONTROL = lib.mkForce no;
      INTEL_VBTN = lib.mkForce no;
      INTEL_VSEC = lib.mkForce no;
      INTEL_WMI_SBL_FW_UPDATE = lib.mkForce no;
      INTEL_WMI_THUNDERBOLT = lib.mkForce no;

      X86_P4_CLOCKMOD = lib.mkForce no;
      X86_SPEEDSTEP_CENTRINO = lib.mkForce no;
      X86_MCE_INTEL = lib.mkForce no;
      X86_SGX = lib.mkForce no;
      X86_INTEL_PSTATE = lib.mkForce unset;

      CPU_SUP_INTEL = lib.mkForce unset;
    };
  };

  no-sec = {
    name = builtins.trace "loading patch: no-sec" "no-sec";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      # We are not a k8s server
      CPU_MITIGATIONS = lib.mkForce no;
      SECURITY_SELINUX = lib.mkForce no;
      SECURITY_APPARMOR = lib.mkForce no;
      DEFAULT_SECURITY_APPARMOR = lib.mkForce unset;
    };
  };
  
  no-unused-crypto = {
    name = "no-unused-crypto";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      CRYPTO_842 = lib.mkForce no;
      CRYPTO_LZ4 = lib.mkForce no;
      CRYPTO_LZ4HC = lib.mkForce no;
      CRYPTO_BLOWFISH = lib.mkForce no;
      CRYPTO_BLOWFISH_X86_64 = lib.mkForce no;
      CRYPTO_DES = lib.mkForce no;
      CRYPTO_FCRYPT = lib.mkForce no;
      CRYPTO_KHAZAD = lib.mkForce no;
      CRYPTO_ANUBIS = lib.mkForce no;
      # Seem to have some dependents that need disabling
      # CRYPTO_CAMELLIA = lib.mkForce no;
      # CRYPTO_SERPENT = lib.mkForce no;
      CRYPTO_TEA = lib.mkForce no;
      CRYPTO_TWOFISH = lib.mkForce no;
    };
  };

  # ‚ö†Ô∏è This is a result of running the streamline perl script.  It likely will not
  # pass config, but is left as an example of the output!
  streamlined = {
    name = "streamlined";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      "64BIT" = lib.mkForce yes;
      ADVISE_SYSCALLS = lib.mkForce yes;
      AIO = lib.mkForce yes;
      ALLOW_DEV_COREDUMP = lib.mkForce yes;
      ARCH_CLOCKSOURCE_INIT = lib.mkForce yes;
      ARCH_CONFIGURES_CPU_MITIGATIONS = lib.mkForce yes;
      ARCH_CORRECT_STACKTRACE_ON_KRETPROBE = lib.mkForce yes;
      ARCH_DEFAULT_CRASH_DUMP = lib.mkForce yes;
      ARCH_DMA_ADDR_T_64BIT = lib.mkForce yes;
      ARCH_ENABLE_MEMORY_HOTPLUG = lib.mkForce yes;
      ARCH_ENABLE_SPLIT_PMD_PTLOCK = lib.mkForce yes;
      ARCH_HAS_ADD_PAGES = lib.mkForce yes;
      ARCH_HAS_CACHE_LINE_SIZE = lib.mkForce yes;
      ARCH_HAS_COPY_MC = lib.mkForce yes;
      ARCH_HAS_CPU_CACHE_INVALIDATE_MEMREGION = lib.mkForce yes;
      ARCH_HAS_CPU_FINALIZE_INIT = lib.mkForce yes;
      ARCH_HAS_CPU_RELAX = lib.mkForce yes;
      ARCH_HAS_CRC32 = lib.mkForce yes;
      ARCH_HAS_CRC64 = lib.mkForce yes;
      ARCH_HAS_CRC_T10DIF = lib.mkForce yes;
      ARCH_HAS_CURRENT_STACK_POINTER = lib.mkForce yes;
      ARCH_HAS_DEBUG_VIRTUAL = lib.mkForce yes;
      ARCH_HAS_DEBUG_VM_PGTABLE = lib.mkForce yes;
      ARCH_HAS_DEBUG_WX = lib.mkForce yes;
      ARCH_HAS_DEVMEM_IS_ALLOWED = lib.mkForce yes;
      ARCH_HAS_ELFCORE_COMPAT = lib.mkForce yes;
      ARCH_HAS_ELF_RANDOMIZE = lib.mkForce yes;
      ARCH_HAS_FAST_MULTIPLIER = lib.mkForce yes;
      ARCH_HAS_FORTIFY_SOURCE = lib.mkForce yes;
      ARCH_HAS_GCOV_PROFILE_ALL = lib.mkForce yes;
      ARCH_HAS_GIGANTIC_PAGE = lib.mkForce yes;
      ARCH_HAS_HW_PTE_YOUNG = lib.mkForce yes;
      ARCH_HAS_KCOV = lib.mkForce yes;
      ARCH_HAS_KERNEL_FPU_SUPPORT = lib.mkForce yes;
      ARCH_HAS_MEMBARRIER_SYNC_CORE = lib.mkForce yes;
      ARCH_HAS_MEM_ENCRYPT = lib.mkForce yes;
      ARCH_HAS_NMI_SAFE_THIS_CPU_OPS = lib.mkForce yes;
      ARCH_HAS_NONLEAF_PMD_YOUNG = lib.mkForce yes;
      ARCH_HAS_NON_OVERLAPPING_ADDRESS_SPACE = lib.mkForce yes;
      ARCH_HAS_PARANOID_L1D_FLUSH = lib.mkForce yes;
      ARCH_HAS_PMEM_API = lib.mkForce yes;
      ARCH_HAS_PREEMPT_LAZY = lib.mkForce yes;
      ARCH_HAS_PTDUMP = lib.mkForce yes;
      ARCH_HAS_PTE_DEVMAP = lib.mkForce yes;
      ARCH_HAS_PTE_SPECIAL = lib.mkForce yes;
      ARCH_HAS_SET_DIRECT_MAP = lib.mkForce yes;
      ARCH_HAS_SET_MEMORY = lib.mkForce yes;
      ARCH_HAS_STRICT_KERNEL_RWX = lib.mkForce yes;
      ARCH_HAS_STRICT_MODULE_RWX = lib.mkForce yes;
      ARCH_HAS_SYNC_CORE_BEFORE_USERMODE = lib.mkForce yes;
      ARCH_HAS_SYSCALL_WRAPPER = lib.mkForce yes;
      ARCH_HAS_UACCESS_FLUSHCACHE = lib.mkForce yes;
      ARCH_HAS_UBSAN = lib.mkForce yes;
      ARCH_HAVE_EXTRA_ELF_NOTES = lib.mkForce yes;
      ARCH_HAVE_NMI_SAFE_CMPXCHG = lib.mkForce yes;
      ARCH_HIBERNATION_POSSIBLE = lib.mkForce yes;
      ARCH_MAY_HAVE_PC_FDC = lib.mkForce yes;
      ARCH_MHP_MEMMAP_ON_MEMORY_ENABLE = lib.mkForce yes;
      ARCH_MIGHT_HAVE_PC_PARPORT = lib.mkForce yes;
      ARCH_MIGHT_HAVE_PC_SERIO = lib.mkForce yes;
      ARCH_SPARSEMEM_DEFAULT = lib.mkForce yes;
      ARCH_SPARSEMEM_ENABLE = lib.mkForce yes;
      ARCH_STACKWALK = lib.mkForce yes;
      ARCH_SUPPORTS_ACPI = lib.mkForce yes;
      ARCH_SUPPORTS_ATOMIC_RMW = lib.mkForce yes;
      ARCH_SUPPORTS_AUTOFDO_CLANG = lib.mkForce yes;
      ARCH_SUPPORTS_CFI_CLANG = lib.mkForce yes;
      ARCH_SUPPORTS_CRASH_DUMP = lib.mkForce yes;
      ARCH_SUPPORTS_CRASH_HOTPLUG = lib.mkForce yes;
      ARCH_SUPPORTS_DEBUG_PAGEALLOC = lib.mkForce yes;
      ARCH_SUPPORTS_INT128 = lib.mkForce yes;
      ARCH_SUPPORTS_KEXEC = lib.mkForce yes;
      ARCH_SUPPORTS_KEXEC_BZIMAGE_VERIFY_SIG = lib.mkForce yes;
      ARCH_SUPPORTS_KEXEC_FILE = lib.mkForce yes;
      ARCH_SUPPORTS_KEXEC_HANDOVER = lib.mkForce yes;
      ARCH_SUPPORTS_KEXEC_JUMP = lib.mkForce yes;
      ARCH_SUPPORTS_KEXEC_PURGATORY = lib.mkForce yes;
      ARCH_SUPPORTS_KEXEC_SIG = lib.mkForce yes;
      ARCH_SUPPORTS_KEXEC_SIG_FORCE = lib.mkForce yes;
      ARCH_SUPPORTS_KMAP_LOCAL_FORCE_MAP = lib.mkForce yes;
      ARCH_SUPPORTS_LTO_CLANG = lib.mkForce yes;
      ARCH_SUPPORTS_LTO_CLANG_THIN = lib.mkForce yes;
      ARCH_SUPPORTS_MSEAL_SYSTEM_MAPPINGS = lib.mkForce yes;
      ARCH_SUPPORTS_NUMA_BALANCING = lib.mkForce yes;
      ARCH_SUPPORTS_PAGE_TABLE_CHECK = lib.mkForce yes;
      ARCH_SUPPORTS_PER_VMA_LOCK = lib.mkForce yes;
      ARCH_SUPPORTS_PROPELLER_CLANG = lib.mkForce yes;
      ARCH_SUPPORTS_PT_RECLAIM = lib.mkForce yes;
      ARCH_SUPPORTS_RT = lib.mkForce yes;
      ARCH_SUPPORTS_UPROBES = lib.mkForce yes;
      ARCH_SUSPEND_POSSIBLE = lib.mkForce yes;
      ARCH_USES_PG_ARCH_2 = lib.mkForce yes;
      ARCH_USE_BUILTIN_BSWAP = lib.mkForce yes;
      ARCH_USE_CMPXCHG_LOCKREF = lib.mkForce yes;
      ARCH_USE_MEMTEST = lib.mkForce yes;
      ARCH_USE_QUEUED_RWLOCKS = lib.mkForce yes;
      ARCH_USE_QUEUED_SPINLOCKS = lib.mkForce yes;
      ARCH_USE_SYM_ANNOTATIONS = lib.mkForce yes;
      ARCH_WANTS_DYNAMIC_TASK_STRUCT = lib.mkForce yes;
      ARCH_WANTS_NO_INSTR = lib.mkForce yes;
      ARCH_WANTS_THP_SWAP = lib.mkForce yes;
      ARCH_WANT_BATCHED_UNMAP_TLB_FLUSH = lib.mkForce yes;
      ARCH_WANT_DEFAULT_BPF_JIT = lib.mkForce yes;
      ARCH_WANT_GENERAL_HUGETLB = lib.mkForce yes;
      ARCH_WANT_HUGETLB_VMEMMAP_PREINIT = lib.mkForce yes;
      ARCH_WANT_HUGE_PMD_SHARE = lib.mkForce yes;
      ARCH_WANT_IRQS_OFF_ACTIVATE_MM = lib.mkForce yes;
      ARCH_WANT_LD_ORPHAN_WARN = lib.mkForce yes;
      ARCH_WANT_OPTIMIZE_DAX_VMEMMAP = lib.mkForce yes;
      ARCH_WANT_OPTIMIZE_HUGETLB_VMEMMAP = lib.mkForce yes;
      AS_AVX512 = lib.mkForce yes;
      AS_GFNI = lib.mkForce yes;
      AS_HAS_NON_CONST_ULEB128 = lib.mkForce yes;
      AS_IS_LLVM = lib.mkForce yes;
      AS_VAES = lib.mkForce yes;
      AS_VPCLMULQDQ = lib.mkForce yes;
      AS_WRUSS = lib.mkForce yes;
      AUDIT_ARCH = lib.mkForce yes;
      BCMA_POSSIBLE = lib.mkForce yes;
      BITREVERSE = lib.mkForce yes;
      BLOCK = lib.mkForce yes;
      BROADCAST_TLB_FLUSH = lib.mkForce yes;
      BROKEN_ON_SMP = lib.mkForce yes;
      BUG = lib.mkForce yes;
      BUILDTIME_TABLE_SORT = lib.mkForce yes;
      CACHESTAT_SYSCALL = lib.mkForce yes;
      CC_CAN_LINK = lib.mkForce yes;
      CC_HAS_ASM_GOTO_OUTPUT = lib.mkForce yes;
      CC_HAS_ASM_GOTO_TIED_OUTPUT = lib.mkForce yes;
      CC_HAS_ASM_INLINE = lib.mkForce yes;
      CC_HAS_AUTO_VAR_INIT_PATTERN = lib.mkForce yes;
      CC_HAS_AUTO_VAR_INIT_ZERO = lib.mkForce yes;
      CC_HAS_AUTO_VAR_INIT_ZERO_BARE = lib.mkForce yes;
      CC_HAS_COUNTED_BY = lib.mkForce yes;
      CC_HAS_ENTRY_PADDING = lib.mkForce yes;
      CC_HAS_IBT = lib.mkForce yes;
      CC_HAS_INT128 = lib.mkForce yes;
      CC_HAS_KASAN_GENERIC = lib.mkForce yes;
      CC_HAS_KASAN_SW_TAGS = lib.mkForce yes;
      CC_HAS_MARCH_NATIVE = lib.mkForce yes;
      CC_HAS_NAMED_AS_FIXED_SANITIZERS = lib.mkForce yes;
      CC_HAS_NO_PROFILE_FN_ATTR = lib.mkForce yes;
      CC_HAS_RANDSTRUCT = lib.mkForce yes;
      CC_HAS_RETURN_THUNK = lib.mkForce yes;
      CC_HAS_SANE_FUNCTION_ALIGNMENT = lib.mkForce yes;
      CC_HAS_SLS = lib.mkForce yes;
      CC_HAS_WORKING_NOSANITIZE_ADDRESS = lib.mkForce yes;
      CC_HAS_ZERO_CALL_USED_REGS = lib.mkForce yes;
      CC_IS_CLANG = lib.mkForce yes;
      CC_OPTIMIZE_FOR_PERFORMANCE = lib.mkForce yes;
      CLKBLD_I8253 = lib.mkForce yes;
      CLKEVT_I8253 = lib.mkForce yes;
      CLOCKSOURCE_WATCHDOG = lib.mkForce yes;
      CONSOLE_TRANSLATIONS = lib.mkForce yes;
      COREDUMP = lib.mkForce yes;
      CPU_SUP_AMD = lib.mkForce yes;
      CRC32 = lib.mkForce yes;
      CRC32_ARCH = lib.mkForce yes;
      CRC_OPTIMIZATIONS = lib.mkForce yes;
      CRYPTO_ARCH_HAVE_LIB_SHA256 = lib.mkForce yes;
      CRYPTO_ARCH_HAVE_LIB_SHA256_SIMD = lib.mkForce yes;
      CRYPTO_LIB_BLAKE2S_GENERIC = lib.mkForce yes;
      CRYPTO_LIB_SHA256 = lib.mkForce yes;
      CRYPTO_LIB_SHA256_GENERIC = lib.mkForce yes;
      CRYPTO_SHA256_X86_64 = lib.mkForce yes;
      DCACHE_WORD_ACCESS = lib.mkForce yes;
      DEBUG_BUGVERBOSE = lib.mkForce yes;
      DEBUG_MEMORY_INIT = lib.mkForce yes;
      DEFAULT_SECURITY_DAC = lib.mkForce yes;
      DMA_NEED_SYNC = lib.mkForce yes;
      DMI = lib.mkForce yes;
      DMI_SCAN_MACHINE_NON_EFI_FALLBACK = lib.mkForce yes;
      DUMMY_CONSOLE = lib.mkForce yes;
      DYNAMIC_SIGFRAME = lib.mkForce yes;
      EARLY_PRINTK = lib.mkForce yes;
      EDAC_ATOMIC_SCRUB = lib.mkForce yes;
      EDAC_SUPPORT = lib.mkForce yes;
      EFI_PARTITION = lib.mkForce yes;
      ELF_CORE = lib.mkForce yes;
      EPOLL = lib.mkForce yes;
      EVENTFD = lib.mkForce yes;
      EXCLUSIVE_SYSTEM_RAM = lib.mkForce yes;
      EXPORTFS = lib.mkForce yes;
      FHANDLE = lib.mkForce yes;
      FILE_LOCKING = lib.mkForce yes;
      FIRMWARE_MEMMAP = lib.mkForce yes;
      FIX_EARLYCON_MEM = lib.mkForce yes;
      FORCE_NR_CPUS = lib.mkForce yes;
      FS_IOMAP = lib.mkForce yes;
      FUNCTION_ALIGNMENT_16B = lib.mkForce yes;
      FUNCTION_ALIGNMENT_4B = lib.mkForce yes;
      FUTEX = lib.mkForce yes;
      FUTEX_PI = lib.mkForce yes;
      FW_LOADER = lib.mkForce yes;
      GCC10_NO_ARRAY_BOUNDS = lib.mkForce yes;
      GCC_NO_STRINGOP_OVERFLOW = lib.mkForce yes;
      GENERIC_BUG = lib.mkForce yes;
      GENERIC_BUG_RELATIVE_POINTERS = lib.mkForce yes;
      GENERIC_CALIBRATE_DELAY = lib.mkForce yes;
      GENERIC_CLOCKEVENTS = lib.mkForce yes;
      GENERIC_CLOCKEVENTS_BROADCAST = lib.mkForce yes;
      GENERIC_CLOCKEVENTS_BROADCAST_IDLE = lib.mkForce yes;
      GENERIC_CLOCKEVENTS_MIN_ADJUST = lib.mkForce yes;
      GENERIC_CMOS_UPDATE = lib.mkForce yes;
      GENERIC_CPU_AUTOPROBE = lib.mkForce yes;
      GENERIC_CPU_DEVICES = lib.mkForce yes;
      GENERIC_CPU_VULNERABILITIES = lib.mkForce yes;
      GENERIC_EARLY_IOREMAP = lib.mkForce yes;
      GENERIC_ENTRY = lib.mkForce yes;
      GENERIC_GETTIMEOFDAY = lib.mkForce yes;
      GENERIC_IOMAP = lib.mkForce yes;
      GENERIC_IRQ_MATRIX_ALLOCATOR = lib.mkForce yes;
      GENERIC_IRQ_PROBE = lib.mkForce yes;
      GENERIC_IRQ_RESERVATION_MODE = lib.mkForce yes;
      GENERIC_IRQ_SHOW = lib.mkForce yes;
      GENERIC_ISA_DMA = lib.mkForce yes;
      GENERIC_PCI_IOMAP = lib.mkForce yes;
      GENERIC_SMP_IDLE_THREAD = lib.mkForce yes;
      GENERIC_STRNCPY_FROM_USER = lib.mkForce yes;
      GENERIC_STRNLEN_USER = lib.mkForce yes;
      GENERIC_TIME_VSYSCALL = lib.mkForce yes;
      GENERIC_VDSO_DATA_STORE = lib.mkForce yes;
      GENERIC_VDSO_OVERFLOW_PROTECT = lib.mkForce yes;
      GENERIC_VDSO_TIME_NS = lib.mkForce yes;
      HARDIRQS_SW_RESEND = lib.mkForce yes;
      HARDLOCKUP_CHECK_TIMESTAMP = lib.mkForce yes;
      HAS_DMA = lib.mkForce yes;
      HAS_IOMEM = lib.mkForce yes;
      HAS_IOPORT = lib.mkForce yes;
      HAS_IOPORT_MAP = lib.mkForce yes;
      HAS_LTO_CLANG = lib.mkForce yes;
      HAVE_ALIGNED_STRUCT_PAGE = lib.mkForce yes;
      HAVE_ARCH_AUDITSYSCALL = lib.mkForce yes;
      HAVE_ARCH_HUGE_VMALLOC = lib.mkForce yes;
      HAVE_ARCH_HUGE_VMAP = lib.mkForce yes;
      HAVE_ARCH_JUMP_LABEL = lib.mkForce yes;
      HAVE_ARCH_JUMP_LABEL_RELATIVE = lib.mkForce yes;
      HAVE_ARCH_KASAN = lib.mkForce yes;
      HAVE_ARCH_KASAN_VMALLOC = lib.mkForce yes;
      HAVE_ARCH_KCSAN = lib.mkForce yes;
      HAVE_ARCH_KFENCE = lib.mkForce yes;
      HAVE_ARCH_KGDB = lib.mkForce yes;
      HAVE_ARCH_KMSAN = lib.mkForce yes;
      HAVE_ARCH_MMAP_RND_BITS = lib.mkForce yes;
      HAVE_ARCH_PREL32_RELOCATIONS = lib.mkForce yes;
      HAVE_ARCH_RANDOMIZE_KSTACK_OFFSET = lib.mkForce yes;
      HAVE_ARCH_SECCOMP = lib.mkForce yes;
      HAVE_ARCH_SECCOMP_FILTER = lib.mkForce yes;
      HAVE_ARCH_SOFT_DIRTY = lib.mkForce yes;
      HAVE_ARCH_STACKLEAK = lib.mkForce yes;
      HAVE_ARCH_THREAD_STRUCT_WHITELIST = lib.mkForce yes;
      HAVE_ARCH_TRACEHOOK = lib.mkForce yes;
      HAVE_ARCH_TRANSPARENT_HUGEPAGE = lib.mkForce yes;
      HAVE_ARCH_TRANSPARENT_HUGEPAGE_PUD = lib.mkForce yes;
      HAVE_ARCH_VMAP_STACK = lib.mkForce yes;
      HAVE_ARCH_WITHIN_STACK_FRAMES = lib.mkForce yes;
      HAVE_ASM_MODVERSIONS = lib.mkForce yes;
      HAVE_BUILDTIME_MCOUNT_SORT = lib.mkForce yes;
      HAVE_CFI_ICALL_NORMALIZE_INTEGERS_CLANG = lib.mkForce yes;
      HAVE_CFI_ICALL_NORMALIZE_INTEGERS_RUSTC = lib.mkForce yes;
      HAVE_CMPXCHG_DOUBLE = lib.mkForce yes;
      HAVE_CMPXCHG_LOCAL = lib.mkForce yes;
      HAVE_CONTEXT_TRACKING_USER = lib.mkForce yes;
      HAVE_CONTEXT_TRACKING_USER_OFFSTACK = lib.mkForce yes;
      HAVE_C_RECORDMCOUNT = lib.mkForce yes;
      HAVE_DEBUG_KMEMLEAK = lib.mkForce yes;
      HAVE_DMA_CONTIGUOUS = lib.mkForce yes;
      HAVE_DYNAMIC_FTRACE = lib.mkForce yes;
      HAVE_DYNAMIC_FTRACE_NO_PATCHABLE = lib.mkForce yes;
      HAVE_DYNAMIC_FTRACE_WITH_ARGS = lib.mkForce yes;
      HAVE_DYNAMIC_FTRACE_WITH_DIRECT_CALLS = lib.mkForce yes;
      HAVE_DYNAMIC_FTRACE_WITH_REGS = lib.mkForce yes;
      HAVE_EBPF_JIT = lib.mkForce yes;
      HAVE_EFFICIENT_UNALIGNED_ACCESS = lib.mkForce yes;
      HAVE_EXIT_THREAD = lib.mkForce yes;
      HAVE_FENTRY = lib.mkForce yes;
      HAVE_FTRACE_MCOUNT_RECORD = lib.mkForce yes;
      HAVE_FTRACE_REGS_HAVING_PT_REGS = lib.mkForce yes;
      HAVE_FUNCTION_ARG_ACCESS_API = lib.mkForce yes;
      HAVE_FUNCTION_ERROR_INJECTION = lib.mkForce yes;
      HAVE_FUNCTION_TRACER = lib.mkForce yes;
      HAVE_GCC_PLUGINS = lib.mkForce yes;
      HAVE_GENERIC_VDSO = lib.mkForce yes;
      HAVE_GUP_FAST = lib.mkForce yes;
      HAVE_HARDLOCKUP_DETECTOR_PERF = lib.mkForce yes;
      HAVE_HW_BREAKPOINT = lib.mkForce yes;
      HAVE_IOREMAP_PROT = lib.mkForce yes;
      HAVE_IRQ_EXIT_ON_IRQ_STACK = lib.mkForce yes;
      HAVE_IRQ_TIME_ACCOUNTING = lib.mkForce yes;
      HAVE_JUMP_LABEL_HACK = lib.mkForce yes;
      HAVE_KCSAN_COMPILER = lib.mkForce yes;
      HAVE_KERNEL_BZIP2 = lib.mkForce yes;
      HAVE_KERNEL_GZIP = lib.mkForce yes;
      HAVE_KERNEL_LZ4 = lib.mkForce yes;
      HAVE_KERNEL_LZMA = lib.mkForce yes;
      HAVE_KERNEL_LZO = lib.mkForce yes;
      HAVE_KERNEL_XZ = lib.mkForce yes;
      HAVE_KERNEL_ZSTD = lib.mkForce yes;
      HAVE_KMSAN_COMPILER = lib.mkForce yes;
      HAVE_KPROBES = lib.mkForce yes;
      HAVE_KPROBES_ON_FTRACE = lib.mkForce yes;
      HAVE_KRETPROBES = lib.mkForce yes;
      HAVE_LIVEPATCH = lib.mkForce yes;
      HAVE_MIXED_BREAKPOINTS_REGS = lib.mkForce yes;
      HAVE_MMIOTRACE_SUPPORT = lib.mkForce yes;
      HAVE_MOD_ARCH_SPECIFIC = lib.mkForce yes;
      HAVE_MOVE_PMD = lib.mkForce yes;
      HAVE_MOVE_PUD = lib.mkForce yes;
      HAVE_NMI = lib.mkForce yes;
      HAVE_NOINSTR_HACK = lib.mkForce yes;
      HAVE_NOINSTR_VALIDATION = lib.mkForce yes;
      HAVE_OBJTOOL = lib.mkForce yes;
      HAVE_OBJTOOL_MCOUNT = lib.mkForce yes;
      HAVE_OBJTOOL_NOP_MCOUNT = lib.mkForce yes;
      HAVE_OPTPROBES = lib.mkForce yes;
      HAVE_PAGE_SIZE_4KB = lib.mkForce yes;
      HAVE_PCI = lib.mkForce yes;
      HAVE_PCSPKR_PLATFORM = lib.mkForce yes;
      HAVE_PERF_EVENTS = lib.mkForce yes;
      HAVE_PERF_EVENTS_NMI = lib.mkForce yes;
      HAVE_PERF_REGS = lib.mkForce yes;
      HAVE_PERF_USER_STACK_DUMP = lib.mkForce yes;
      HAVE_POSIX_CPU_TIMERS_TASK_WORK = lib.mkForce yes;
      HAVE_PREEMPT_DYNAMIC = lib.mkForce yes;
      HAVE_PREEMPT_DYNAMIC_CALL = lib.mkForce yes;
      HAVE_REGS_AND_STACK_ACCESS_API = lib.mkForce yes;
      HAVE_RELIABLE_STACKTRACE = lib.mkForce yes;
      HAVE_RETHOOK = lib.mkForce yes;
      HAVE_RSEQ = lib.mkForce yes;
      HAVE_RUST = lib.mkForce yes;
      HAVE_SAMPLE_FTRACE_DIRECT = lib.mkForce yes;
      HAVE_SAMPLE_FTRACE_DIRECT_MULTI = lib.mkForce yes;
      HAVE_SETUP_PER_CPU_AREA = lib.mkForce yes;
      HAVE_SOFTIRQ_ON_OWN_STACK = lib.mkForce yes;
      HAVE_STACKPROTECTOR = lib.mkForce yes;
      HAVE_STACK_VALIDATION = lib.mkForce yes;
      HAVE_STATIC_CALL = lib.mkForce yes;
      HAVE_STATIC_CALL_INLINE = lib.mkForce yes;
      HAVE_SYSCALL_TRACEPOINTS = lib.mkForce yes;
      HAVE_UACCESS_VALIDATION = lib.mkForce yes;
      HAVE_UNSTABLE_SCHED_CLOCK = lib.mkForce yes;
      HAVE_USER_RETURN_NOTIFIER = lib.mkForce yes;
      HAVE_VIRT_CPU_ACCOUNTING_GEN = lib.mkForce yes;
      HPET_TIMER = lib.mkForce yes;
      HZ_250 = lib.mkForce yes;
      HZ_PERIODIC = lib.mkForce yes;
      I8253_LOCK = lib.mkForce yes;
      IA32_FEAT_CTL = lib.mkForce yes;
      IKCONFIG = lib.mkForce module;
      INIT_STACK_ALL_ZERO = lib.mkForce yes;
      INLINE_READ_UNLOCK = lib.mkForce yes;
      INLINE_READ_UNLOCK_IRQ = lib.mkForce yes;
      INLINE_SPIN_UNLOCK_IRQ = lib.mkForce yes;
      INLINE_WRITE_UNLOCK = lib.mkForce yes;
      INLINE_WRITE_UNLOCK_IRQ = lib.mkForce yes;
      INPUT = lib.mkForce yes;
      INSTRUCTION_DECODER = lib.mkForce yes;
      IO_DELAY_0X80 = lib.mkForce yes;
      IO_URING = lib.mkForce yes;
      IO_WQ = lib.mkForce yes;
      IRQ_DOMAIN = lib.mkForce yes;
      IRQ_DOMAIN_HIERARCHY = lib.mkForce yes;
      IRQ_FORCED_THREADING = lib.mkForce yes;
      IRQ_WORK = lib.mkForce yes;
      ISA_DMA_API = lib.mkForce yes;
      KALLSYMS = lib.mkForce yes;
      KERNEL_GZIP = lib.mkForce yes;
      KERNFS = lib.mkForce yes;
      LD_IS_LLD = lib.mkForce yes;
      LD_ORPHAN_WARN = lib.mkForce yes;
      LEGACY_VSYSCALL_XONLY = lib.mkForce yes;
      LOCKDEP_SUPPORT = lib.mkForce yes;
      LOCK_DEBUGGING_SUPPORT = lib.mkForce yes;
      LOCK_MM_AND_FIND_VMA = lib.mkForce yes;
      LTO_NONE = lib.mkForce yes;
      MEMBARRIER = lib.mkForce yes;
      MICROCODE = lib.mkForce yes;
      MMU = lib.mkForce yes;
      MMU_GATHER_MERGE_VMAS = lib.mkForce yes;
      MMU_GATHER_RCU_TABLE_FREE = lib.mkForce yes;
      MMU_GATHER_TABLE_FREE = lib.mkForce yes;
      MMU_LAZY_TLB_REFCOUNT = lib.mkForce yes;
      MODIFY_LDT_SYSCALL = lib.mkForce yes;
      MODULES_USE_ELF_RELA = lib.mkForce yes;
      MSDOS_PARTITION = lib.mkForce yes;
      MTRR = lib.mkForce yes;
      MULTIUSER = lib.mkForce yes;
      NAMESPACES = lib.mkForce yes;
      NEED_DMA_MAP_STATE = lib.mkForce yes;
      NEED_PER_CPU_EMBED_FIRST_CHUNK = lib.mkForce yes;
      NEED_PER_CPU_KM = lib.mkForce yes;
      NEED_PER_CPU_PAGE_FIRST_CHUNK = lib.mkForce yes;
      NEED_SG_DMA_LENGTH = lib.mkForce yes;
      OBJTOOL = lib.mkForce yes;
      PAGE_MAPCOUNT = lib.mkForce yes;
      PAGE_SIZE_4KB = lib.mkForce yes;
      PAGE_SIZE_LESS_THAN_256KB = lib.mkForce yes;
      PAGE_SIZE_LESS_THAN_64KB = lib.mkForce yes;
      PCSPKR_PLATFORM = lib.mkForce yes;
      PERF_EVENTS = lib.mkForce yes;
      PHYS_ADDR_T_64BIT = lib.mkForce yes;
      POSIX_CPU_TIMERS_TASK_WORK = lib.mkForce yes;
      POSIX_TIMERS = lib.mkForce yes;
      PREEMPT_NONE = lib.mkForce yes;
      PREEMPT_NONE_BUILD = lib.mkForce yes;
      PRINTK = lib.mkForce yes;
      PROC_FS = lib.mkForce yes;
      PROC_MEM_ALWAYS_FORCE = lib.mkForce yes;
      PROC_PAGE_MONITOR = lib.mkForce yes;
      PROC_PID_ARCH_STATUS = lib.mkForce yes;
      PROC_SYSCTL = lib.mkForce yes;
      PTP_1588_CLOCK_OPTIONAL = lib.mkForce yes;
      RANDOMIZE_KSTACK_OFFSET = lib.mkForce yes;
      RANDSTRUCT_NONE = lib.mkForce yes;
      RSEQ = lib.mkForce yes;
      RTC_LIB = lib.mkForce yes;
      RTC_MC146818_LIB = lib.mkForce yes;
      RT_MUTEXES = lib.mkForce yes;
      RUSTC_HAS_COERCE_POINTEE = lib.mkForce yes;
      RUSTC_HAS_SPAN_FILE = lib.mkForce yes;
      RUSTC_HAS_UNNECESSARY_TRANSMUTES = lib.mkForce yes;
      SBITMAP = lib.mkForce yes;
      SCSI_MOD = lib.mkForce yes;
      SECRETMEM = lib.mkForce yes;
      SGETMASK_SYSCALL = lib.mkForce yes;
      SHMEM = lib.mkForce yes;
      SIGNALFD = lib.mkForce yes;
      SLUB = lib.mkForce yes;
      SLUB_DEBUG = lib.mkForce yes;
      SOFTIRQ_ON_OWN_STACK = lib.mkForce yes;
      SPARSEMEM = lib.mkForce yes;
      SPARSEMEM_EXTREME = lib.mkForce yes;
      SPARSEMEM_VMEMMAP = lib.mkForce yes;
      SPARSEMEM_VMEMMAP_ENABLE = lib.mkForce yes;
      SPARSE_IRQ = lib.mkForce yes;
      SSB_POSSIBLE = lib.mkForce yes;
      STACKDEPOT = lib.mkForce yes;
      STACKTRACE = lib.mkForce yes;
      STACKTRACE_SUPPORT = lib.mkForce yes;
      STRICT_KERNEL_RWX = lib.mkForce yes;
      SWIOTLB = lib.mkForce yes;
      SYSCTL = lib.mkForce yes;
      SYSCTL_EXCEPTION_TRACE = lib.mkForce yes;
      SYSFS = lib.mkForce yes;
      THREAD_INFO_IN_TASK = lib.mkForce yes;
      TICK_CPU_ACCOUNTING = lib.mkForce yes;
      TIMERFD = lib.mkForce yes;
      TINY_RCU = lib.mkForce yes;
      TINY_SRCU = lib.mkForce yes;
      TOOLS_SUPPORT_RELR = lib.mkForce yes;
      TRACE_IRQFLAGS_NMI_SUPPORT = lib.mkForce yes;
      TRACE_IRQFLAGS_SUPPORT = lib.mkForce yes;
      TRACING_SUPPORT = lib.mkForce yes;
      TTY = lib.mkForce yes;
      UNIX98_PTYS = lib.mkForce yes;
      UNWINDER_ORC = lib.mkForce yes;
      UP_LATE_INIT = lib.mkForce yes;
      USB_OHCI_LITTLE_ENDIAN = lib.mkForce yes;
      USER_STACKTRACE_SUPPORT = lib.mkForce yes;
      VDSO_GETRANDOM = lib.mkForce yes;
      VGA_CONSOLE = lib.mkForce yes;
      VM_EVENT_COUNTERS = lib.mkForce yes;
      VT = lib.mkForce yes;
      VT_CONSOLE = lib.mkForce yes;
      X86 = lib.mkForce yes;
      X86_64 = lib.mkForce yes;
      X86_CMOV = lib.mkForce yes;
      X86_CX8 = lib.mkForce yes;
      X86_DEBUGCTLMSR = lib.mkForce yes;
      X86_DIRECT_GBPAGES = lib.mkForce yes;
      X86_DISABLED_FEATURE_CALL_DEPTH = lib.mkForce yes;
      X86_DISABLED_FEATURE_CENTAUR_MCR = lib.mkForce yes;
      X86_DISABLED_FEATURE_CYRIX_ARR = lib.mkForce yes;
      X86_DISABLED_FEATURE_ENQCMD = lib.mkForce yes;
      X86_DISABLED_FEATURE_FRED = lib.mkForce yes;
      X86_DISABLED_FEATURE_IBT = lib.mkForce yes;
      X86_DISABLED_FEATURE_K6_MTRR = lib.mkForce yes;
      X86_DISABLED_FEATURE_LAM = lib.mkForce yes;
      X86_DISABLED_FEATURE_OSPKE = lib.mkForce yes;
      X86_DISABLED_FEATURE_PKU = lib.mkForce yes;
      X86_DISABLED_FEATURE_PTI = lib.mkForce yes;
      X86_DISABLED_FEATURE_RETHUNK = lib.mkForce yes;
      X86_DISABLED_FEATURE_RETPOLINE = lib.mkForce yes;
      X86_DISABLED_FEATURE_RETPOLINE_LFENCE = lib.mkForce yes;
      X86_DISABLED_FEATURE_SEV_SNP = lib.mkForce yes;
      X86_DISABLED_FEATURE_SGX = lib.mkForce yes;
      X86_DISABLED_FEATURE_TDX_GUEST = lib.mkForce yes;
      X86_DISABLED_FEATURE_UNRET = lib.mkForce yes;
      X86_DISABLED_FEATURE_USER_SHSTK = lib.mkForce yes;
      X86_DISABLED_FEATURE_VME = lib.mkForce yes;
      X86_DISABLED_FEATURE_XENPV = lib.mkForce yes;
      X86_ESPFIX64 = lib.mkForce yes;
      X86_HAVE_PAE = lib.mkForce yes;
      X86_INTEL_TSX_MODE_OFF = lib.mkForce yes;
      X86_IO_APIC = lib.mkForce yes;
      X86_LOCAL_APIC = lib.mkForce yes;
      X86_MPPARSE = lib.mkForce yes;
      X86_PAT = lib.mkForce yes;
      X86_REQUIRED_FEATURE_ALWAYS = lib.mkForce yes;
      X86_REQUIRED_FEATURE_CMOV = lib.mkForce yes;
      X86_REQUIRED_FEATURE_CPUID = lib.mkForce yes;
      X86_REQUIRED_FEATURE_CX8 = lib.mkForce yes;
      X86_REQUIRED_FEATURE_FPU = lib.mkForce yes;
      X86_REQUIRED_FEATURE_FXSR = lib.mkForce yes;
      X86_REQUIRED_FEATURE_LM = lib.mkForce yes;
      X86_REQUIRED_FEATURE_MSR = lib.mkForce yes;
      X86_REQUIRED_FEATURE_NOPL = lib.mkForce yes;
      X86_REQUIRED_FEATURE_PAE = lib.mkForce yes;
      X86_REQUIRED_FEATURE_PGE = lib.mkForce yes;
      X86_REQUIRED_FEATURE_PSE = lib.mkForce yes;
      X86_REQUIRED_FEATURE_UP = lib.mkForce yes;
      X86_REQUIRED_FEATURE_XMM2 = lib.mkForce yes;
      X86_REQUIRED_FEATURE_XMM = lib.mkForce yes;
      X86_TSC = lib.mkForce yes;
      X86_UMIP = lib.mkForce yes;
      X86_VMX_FEATURE_NAMES = lib.mkForce yes;
      X86_VSYSCALL_EMULATION = lib.mkForce yes;
      ZONE_DMA32 = lib.mkForce yes;
      ZONE_DMA = lib.mkForce yes;
    };
  };

  peripherals-usb = {
    name = "peripherals-usb";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
    };
  };

  peripherals-video = {
    name = "peripherals-video";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
    };
  };

  peripherals-misc = {
    name = "peripherals-misc";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
    };
  };

  peripherals-fallout = {
    name = "peripherals-fallout";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      IOSCHED_BFQ = module;
    };
  };

  # Options disabled by other options.  This is why we really need to
  # apply options via the kernel infrastructure rather than from
  # structured config.
  subtract-fallout = {
    name = "localmode-fallout";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      MAX31827 = lib.mkForce no;
      PMBUS = lib.mkForce no;
      "9P_FSCACHE" = lib.mkForce unset;
      "9P_FS_POSIX_ACL" = lib.mkForce unset;
      AX25 = lib.mkForce unset;
      BCACHEFS_POSIX_ACL = lib.mkForce unset;
      BCACHEFS_QUOTA = lib.mkForce unset;
      BTRFS_FS_POSIX_ACL = lib.mkForce unset;
      CEPH_FSCACHE = lib.mkForce unset;
      CEPH_FS_POSIX_ACL = lib.mkForce unset;
      CIFS_DFS_UPCALL = lib.mkForce unset;
      CIFS_FSCACHE = lib.mkForce unset;
      CIFS_POSIX = lib.mkForce unset;
      CIFS_UPCALL = lib.mkForce unset;
      CIFS_XATTR = lib.mkForce unset;
      DRM_UNSETUVEAU_GSP_DEFAULT = lib.mkForce unset;
      DRM_UNSETUVEAU_SVM = lib.mkForce unset;
      EXT3_FS_POSIX_ACL = lib.mkForce unset;
      EXT3_FS_SECURITY = lib.mkForce unset;
      FSCACHE_STATS = lib.mkForce unset;
      HVC_XEN = lib.mkForce unset;
      HVC_XEN_FRONTEND = lib.mkForce unset;
      INFINIBAND_IPOIB = lib.mkForce unset;
      INFINIBAND_IPOIB_CM = lib.mkForce unset;
      NFSD_V3_ACL = lib.mkForce unset;
      NFSD_V4 = lib.mkForce unset;
      NFSD_V4_SECURITY_LABEL = lib.mkForce unset;
      NFS_FS = lib.mkForce unset;
      NFS_FSCACHE = lib.mkForce unset;
      NFS_LOCALIO = lib.mkForce unset;
      NFS_SWAP = lib.mkForce unset;
      NFS_V3_ACL = lib.mkForce unset;
      NFS_V4_1 = lib.mkForce unset;
      NFS_V4_2 = lib.mkForce unset;
      NFS_V4_SECURITY_LABEL = lib.mkForce unset;
      OCFS2_DEBUG_MASKLOG = lib.mkForce unset;
      POWER_RESET_GPIO = lib.mkForce unset;
      POWER_RESET_GPIO_RESTART = lib.mkForce unset;
      REISERFS_FS_POSIX_ACL = lib.mkForce unset;
      # REISERFS_FS_SECURITY = lib.mkForce unset;
      REISERFS_FS_XATTR = lib.mkForce unset;
      MITIGATION_SLS = lib.mkForce unset;
      DRM_PANIC_SCREEN_QR_CODE = lib.mkForce unset;
      CRYPTO_TEST = lib.mkForce unset;
      CRC32_SELFTEST = lib.mkForce unset;
      RUST = lib.mkForce unset;
      PCI_XEN = lib.mkForce unset;
      SUNRPC_DEBUG = lib.mkForce unset;
      SWIOTLB_XEN = lib.mkForce unset;
      XEN_BACKEND = lib.mkForce unset;
      XEN_BALLOON = lib.mkForce unset;
      XEN_BALLOON_MEMORY_HOTPLUG = lib.mkForce unset;
      XEN_DOM0 = lib.mkForce unset;
      XEN_EFI = lib.mkForce unset;
      XEN_HAVE_PVMMU = lib.mkForce unset;
      XEN_MCE_LOG = lib.mkForce unset;
      XEN_PVH = lib.mkForce unset;
      XEN_PVHVM = lib.mkForce unset;
      XEN_SAVE_RESTORE = lib.mkForce unset;
      XEN_SYS_HYPERVISOR = lib.mkForce unset;
      AIC79XX_DEBUG_ENABLE = lib.mkForce unset;
      AIC7XXX_DEBUG_ENABLE = lib.mkForce unset;
      AIC94XX_DEBUG = lib.mkForce unset;
      MEGARAID_NEWGEN = lib.mkForce unset;
      NET_FC = lib.mkForce unset;
      SATA_MOBILE_LPM_POLICY = lib.mkForce unset;
      SCSI_LOGGING = lib.mkForce unset;
      SCSI_LOWLEVEL = lib.mkForce unset;
      SCSI_LOWLEVEL_PCMCIA = lib.mkForce unset;
      SCSI_SAS_ATA = lib.mkForce unset;
      CHROMEOS_LAPTOP = lib.mkForce unset;
      CHROMEOS_PSTORE = lib.mkForce unset;
      CHROMEOS_TBMC = lib.mkForce unset;
      CROS_EC = lib.mkForce unset;
      CROS_EC_I2C = lib.mkForce unset;
      CROS_EC_ISHTP = lib.mkForce unset;
      CROS_EC_LPC = lib.mkForce unset;
      CROS_EC_SPI = lib.mkForce unset;
      CROS_KBD_LED_BACKLIGHT = lib.mkForce unset;
      DRM_EXYNOS = lib.mkForce unset;
      DRM_I915_GVT = lib.mkForce unset;
      DRM_I915_GVT_KVMGT = lib.mkForce unset;
      EXT2_FS_POSIX_ACL = lib.mkForce unset;
      EXT2_FS_SECURITY = lib.mkForce unset;
      EXT2_FS_XATTR = lib.mkForce unset;
      JOYSTICK_PSXPAD_SPI_FF = lib.mkForce unset;
      JOYSTICK_XPAD_FF = lib.mkForce unset;
      JOYSTICK_XPAD_LEDS = lib.mkForce unset;
      "8139TOO_8129" = lib.mkForce unset;
      "8139TOO_PIO" = lib.mkForce unset;
      XPOWER_PMIC_OPREGION = lib.mkForce unset;
      ISA_DMA_API = lib.mkForce no;

      NET_VENDOR_CISCO = lib.mkForce unset;
      NET_VENDOR_EMULEX = lib.mkForce unset;
      SND_SOC_MAX98357A = unset;
      X86_SGX_KVM = lib.mkForce unset;

      KVM_AMD_SEV = lib.mkForce unset;
      KVM_ASYNC_PF = lib.mkForce unset;
      KVM_GENERIC_DIRTYLOG_READ_PROTECT = lib.mkForce unset;
      KVM_MMIO = lib.mkForce unset;
      KVM_VFIO = lib.mkForce unset;

      BT_RFCOMM_TTY = lib.mkForce unset;
      DLCI = lib.mkForce unset;
      DVB = lib.mkForce unset;
      EISA = lib.mkForce unset;
      FB_3DFX_ACCEL = lib.mkForce unset;
      FB_ATY_CT = lib.mkForce unset;
      FB_ATY_GX = lib.mkForce unset;
      FB_EFI = lib.mkForce unset;
      FB_HYPERV = lib.mkForce unset;
      FB_NVIDIA_I2C = lib.mkForce unset;
      FB_RIVA_I2C = lib.mkForce unset;
      FB_SAVAGE_ACCEL = lib.mkForce unset;
      FB_SAVAGE_I2C = lib.mkForce unset;
      FB_SIS_300 = lib.mkForce unset;
      FB_SIS_315 = lib.mkForce unset;
      FB_VESA = lib.mkForce unset;
      FRAMEBUFFER_CONSOLE_DEFERRED_TAKEOVER = lib.mkForce unset;
      FRAMERELAY = lib.mkForce unset;
      I2O = lib.mkForce unset;
      IEEE1394 = lib.mkForce unset;
      IRDA = lib.mkForce unset;
      ISA = lib.mkForce unset;
      ISAPNP = lib.mkForce unset;
      MTD_COMPLEX_MAPPINGS = lib.mkForce unset;
      MTD_TESTS = lib.mkForce unset;
      NET_DSA_LEGACY = lib.mkForce unset;
      NET_SB1000 = lib.mkForce unset;
      NVIDIA_SHIELD_FF = lib.mkForce unset;
      OLPC = lib.mkForce unset;
      PCI_GO_ANY = lib.mkForce unset;
      PLIP = lib.mkForce unset;
      PNP = lib.mkForce unset;
      SLIP_COMPRESSED = lib.mkForce unset;
      SLIP_SMART = lib.mkForce unset;
      TR = lib.mkForce unset;
      UBIFS_FS_ADVANCED_COMPR = lib.mkForce unset;
      VGA_SWITCHEROO = lib.mkForce unset;
      VIDEO_V4L1 = lib.mkForce unset;
      VME = lib.mkForce unset;
      TPS68470_PMIC_OPREGION = lib.mkForce unset; # PC Load letter?
    };
  };

  addition-fallout = {
    name = "addition-fallout";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      # Stub
    };
  };

  base-fallout = {
    name = "base-fallout";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      # Stub
    };
  };

  no-debug = {
    name = "no-debug";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      DEBUG_ATOMIC_SLEEP = lib.mkForce no;
      DEBUG_CGROUP_REF = lib.mkForce no;
      DEBUG_DEVRES = lib.mkForce no;
      DEBUG_DRIVER = lib.mkForce no;
      DEBUG_FORCE_FUNCTION_ALIGN_64B = lib.mkForce no;
      DEBUG_FORCE_WEAK_PER_CPU = lib.mkForce no;
      DEBUG_FS_ALLOW_NONE = lib.mkForce no;
      DEBUG_FS_DISALLOW_MOUNT = lib.mkForce no;
      DEBUG_GPIO = lib.mkForce no;
      DEBUG_INFO_COMPRESSED_ZLIB = lib.mkForce no;
      DEBUG_INFO_DWARF4 = lib.mkForce no;
      DEBUG_INFO_DWARF5 = lib.mkForce no;
      DEBUG_INFO_NONE = lib.mkForce no;
      DEBUG_INFO_REDUCED = lib.mkForce no;
      DEBUG_INFO_SPLIT = lib.mkForce no;
      DEBUG_IRQFLAGS = lib.mkForce no;
      DEBUG_KMAP_LOCAL_FORCE_MAP = lib.mkForce no;
      DEBUG_KMEMLEAK = lib.mkForce no;
      DEBUG_KOBJECT = lib.mkForce no;
      DEBUG_LOCKING_API_SELFTESTS = lib.mkForce no;
      DEBUG_LOCK_ALLOC = lib.mkForce no;
      DEBUG_MAPLE_TREE = lib.mkForce no;
      DEBUG_MUTEXES = lib.mkForce no;
      DEBUG_NET = lib.mkForce no;
      DEBUG_NET_SMALL_RTNL = lib.mkForce no;
      DEBUG_NMI_SELFTEST = lib.mkForce no;
      DEBUG_NOTIFIERS = lib.mkForce no;
      DEBUG_OBJECTS = lib.mkForce no;
      DEBUG_PAGEALLOC = lib.mkForce no;
      DEBUG_PAGE_REF = lib.mkForce no;
      DEBUG_PERF_USE_VMALLOC = lib.mkForce no;
      DEBUG_PER_CPU_MAPS = lib.mkForce no;
      DEBUG_PINCTRL = lib.mkForce no;
      DEBUG_PLIST = lib.mkForce no;
      DEBUG_PREEMPT = lib.mkForce no;
      DEBUG_RODATA_TEST = lib.mkForce no;
      DEBUG_RSEQ = lib.mkForce no;
      DEBUG_RT_MUTEXES = lib.mkForce no;
      DEBUG_RWSEMS = lib.mkForce no;
      DEBUG_SG = lib.mkForce no;
      DEBUG_SHIRQ = lib.mkForce no;
      DEBUG_SPINLOCK = lib.mkForce no;
      DEBUG_STACK_USAGE = lib.mkForce no;
      DEBUG_TEST_DRIVER_REMOVE = lib.mkForce no;
      DEBUG_TLBFLUSH = lib.mkForce no;
      DEBUG_VFS = lib.mkForce no;
      DEBUG_VIRTUAL = lib.mkForce no;
      DEBUG_VM = lib.mkForce no;
      DEBUG_VM_PGTABLE = lib.mkForce no;
      DEBUG_WQ_FORCE_RR_CPU = lib.mkForce no;
      DEBUG_WW_MUTEX_SLOWPATH = lib.mkForce no;

      X86_MCE_INJECT = lib.mkForce no;
    };
  };

  localmod-unused-drm = {
    name = "localmod-unused-drm";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      # Swathes of graphics
      DRM_NOUVEAU = no;
      DRM_NOUVEAU_GSP_DEFAULT = lib.mkForce unset;
      DRM_NOUVEAU_SVM = lib.mkForce unset;
      DRM_I915 = lib.mkForce no;
      DRM_RADEON = lib.mkForce no;
    };
  };

  localmod-unused-gpio = with lib.kernel; {
    name = "localmod-unused-gpio";
    patch = null;
    extraStructuredConfig = {
      GPIB = lib.mkForce no;
      GPIO_74X164 = lib.mkForce no;
      GPIO_74XX_MMIO = lib.mkForce no;
      GPIO_ADNP = lib.mkForce no;
      GPIO_AGGREGATOR = lib.mkForce no;
      GPIO_ALTERA = lib.mkForce no;
      GPIO_AMD8111 = lib.mkForce no;
      GPIO_AMDPT = lib.mkForce no;
      GPIO_CADENCE = lib.mkForce no;
      GPIO_CRYSTAL_COVE = lib.mkForce no;
      GPIO_DS4520 = lib.mkForce no;
      GPIO_DWAPB = lib.mkForce no;
      GPIO_ELKHARTLAKE = lib.mkForce no;
      GPIO_F7188X = lib.mkForce no;
      GPIO_FTGPIO010 = lib.mkForce no;
      GPIO_FXL6408 = lib.mkForce no;
      GPIO_GENERIC_PLATFORM = lib.mkForce no;
      GPIO_GRANITERAPIDS = lib.mkForce no;
      GPIO_GRGPIO = lib.mkForce no;
      GPIO_GW_PLD = lib.mkForce no;
      GPIO_HLWD = lib.mkForce no;
      GPIO_IT87 = lib.mkForce no;
      GPIO_LATCH = lib.mkForce no;
      GPIO_LOGICVC = lib.mkForce no;
      GPIO_MAX3191X = lib.mkForce no;
      GPIO_MAX7300 = lib.mkForce no;
      GPIO_MAX7301 = lib.mkForce no;
      GPIO_MAX732X = lib.mkForce no;
      GPIO_MB86S7X = lib.mkForce no;
      GPIO_MC33880 = lib.mkForce no;
      GPIO_ML_IOH = lib.mkForce no;
      GPIO_MOCKUP = lib.mkForce no;
      GPIO_MPSSE = lib.mkForce no;
      GPIO_PCA953X = lib.mkForce no;
      GPIO_PCA9570 = lib.mkForce no;
      GPIO_PCF857X = lib.mkForce no;
      GPIO_PCIE_IDIO_24 = lib.mkForce no;
      GPIO_PCI_IDIO_16 = lib.mkForce no;
      GPIO_PISOSR = lib.mkForce no;
      GPIO_POLARFIRE_SOC = lib.mkForce no;
      GPIO_RDC321X = lib.mkForce no;
      GPIO_SCH311X = lib.mkForce no;
      GPIO_SIFIVE = lib.mkForce no;
      GPIO_SIM = lib.mkForce no;
      GPIO_SLOPPY_LOGIC_ANALYZER = lib.mkForce no;
      GPIO_SODAVILLE = lib.mkForce no;
      GPIO_SYSCON = lib.mkForce no;
      GPIO_SYSFS = lib.mkForce no;
      GPIO_TPIC2810 = lib.mkForce no;
      GPIO_VIRTUSER = lib.mkForce no;
      GPIO_VX855 = lib.mkForce no;
      GPIO_WATCHDOG = lib.mkForce no;
      GPIO_WINBOND = lib.mkForce no;
      GPIO_WS16C48 = lib.mkForce no;
      GPIO_XILINX = lib.mkForce no;
      GPIO_XRA1403 = lib.mkForce no;
    };
  };

  localmod-unused-ir = with lib.kernel; {
    name = "localmod-unused-ir";
    patch = null;
    extraStructuredConfig = {
      IR_IMON_DECODER = lib.mkForce no;
      IR_JVC_DECODER = lib.mkForce no;
      IR_MCE_KBD_DECODER = lib.mkForce no;
      IR_NEC_DECODER = lib.mkForce no;
      IR_RC5_DECODER = lib.mkForce no;
      IR_RC6_DECODER = lib.mkForce no;
      IR_RCMM_DECODER = lib.mkForce no;
      IR_SANYO_DECODER = lib.mkForce no;
      IR_SHARP_DECODER = lib.mkForce no;
      IR_SONY_DECODER = lib.mkForce no;
      IR_XMP_DECODER = lib.mkForce no;
      IR_ENE = lib.mkForce no;
      IR_FINTEK = lib.mkForce no;
      IR_GPIO_CIR = lib.mkForce no;
      IR_GPIO_TX = lib.mkForce no;
      IR_HIX5HD2 = lib.mkForce no;
      IR_IGORPLUGUSB = lib.mkForce no;
      IR_IGUANA = lib.mkForce no;
      IR_IMON = lib.mkForce no;
      IR_IMON_RAW = lib.mkForce no;
      IR_ITE_CIR = lib.mkForce no;
      IR_MCEUSB = lib.mkForce no;
      IR_NUVOTON = lib.mkForce no;
      IR_PWM_TX = lib.mkForce no;
      IR_REDRAT3 = lib.mkForce no;
      IR_SERIAL = lib.mkForce no;
      IR_SPI = lib.mkForce no;
      IR_STREAMZAP = lib.mkForce no;
      IR_TOY = lib.mkForce no;
      IR_TTUSBIR = lib.mkForce no;
      IR_WINBOND_CIR = lib.mkForce no;
    };
  };

  localmod-unused-media = {
    name = "localmod-unused-media";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      # MEDIA_ANALOG_TV_SUPPORT = lib.mkForce no;
      # MEDIA_ATTACH = lib.mkForce no;
      # MEDIA_CAMERA_SUPPORT = lib.mkForce no;
      MEDIA_CEC_RC = lib.mkForce no;
      # MEDIA_CONTROLLER = lib.mkForce no;
      # MEDIA_DIGITAL_TV_SUPPORT = lib.mkForce no;
      MEDIA_PCI_SUPPORT = lib.mkForce no;
      # MEDIA_PLATFORM_DRIVERS = lib.mkForce no;
      # MEDIA_PLATFORM_SUPPORT = lib.mkForce no;
      # MEDIA_RADIO_SUPPORT = lib.mkForce no;
      # MEDIA_SDR_SUPPORT = lib.mkForce no;
      # MEDIA_TEST_SUPPORT = lib.mkForce no;
      # MEDIA_TUNER = lib.mkForce no;
    };
  };

  localmod-unused-mfd = with lib.kernel; {
    name = "localmod-unused-mfd";
    patch = null;
    extraStructuredConfig = {
      MFD_ACT8945A = lib.mkForce no;
      MFD_SMPRO = lib.mkForce no;
      MFD_AS3722 = lib.mkForce no;
      MFD_ATMEL_FLEXCOM = lib.mkForce no;
      MFD_ATMEL_HLCDC = lib.mkForce no;
      MFD_BCM590XX = lib.mkForce no;
      MFD_BD9571MWV = lib.mkForce no;
      MFD_AXP20X_I2C = lib.mkForce no;
      MFD_CGBC = lib.mkForce no;
      MFD_CS42L43_I2C = lib.mkForce no;
      MFD_CS42L43_SDW = lib.mkForce no;
      MFD_MADERA = lib.mkForce no;
      MFD_MAX5970 = lib.mkForce no;
      MFD_DA9062 = lib.mkForce no;
      MFD_DA9063 = lib.mkForce no;
      MFD_DA9150 = lib.mkForce no;
      MFD_DLN2 = lib.mkForce no;
      MFD_GATEWORKS_GSC = lib.mkForce no;
      MFD_MC13XXX_SPI = lib.mkForce no;
      MFD_MC13XXX_I2C = lib.mkForce no;
      MFD_MP2629 = lib.mkForce no;
      MFD_HI6421_PMIC = lib.mkForce no;
      MFD_INTEL_QUARK_I2C_GPIO = lib.mkForce no;
      MFD_INTEL_LPSS_ACPI = lib.mkForce no;
      MFD_INTEL_LPSS_PCI = lib.mkForce no;
      MFD_INTEL_PMC_BXT = lib.mkForce no;
      MFD_IQS62X = lib.mkForce no;
      MFD_JANZ_CMODIO = lib.mkForce no;
      MFD_KEMPLD = lib.mkForce no;
      MFD_88PM800 = lib.mkForce no;
      MFD_88PM805 = lib.mkForce no;
      MFD_MAX14577 = lib.mkForce no;
      MFD_MAX77541 = lib.mkForce no;
      MFD_MAX77620 = lib.mkForce no;
      MFD_MAX77650 = lib.mkForce no;
      MFD_MAX77686 = lib.mkForce no;
      MFD_MAX77693 = lib.mkForce no;
      MFD_MAX77705 = lib.mkForce no;
      MFD_MAX77714 = lib.mkForce no;
      MFD_MAX77759 = lib.mkForce no;
      MFD_MAX8907 = lib.mkForce no;
      MFD_MT6360 = lib.mkForce no;
      MFD_MT6370 = lib.mkForce no;
      MFD_MT6397 = lib.mkForce no;
      MFD_MENF21BMC = lib.mkForce no;
      # MFD_OCELOT = lib.mkForce no;
      MFD_CPCAP = lib.mkForce no;
      MFD_VIPERBOARD = lib.mkForce no;
      MFD_NTXEC = lib.mkForce no;
      MFD_RETU = lib.mkForce no;
      MFD_SY7636A = lib.mkForce no;
      MFD_RDC321X = lib.mkForce no;
      MFD_RT4831 = lib.mkForce no;
      MFD_RT5033 = lib.mkForce no;
      MFD_RT5120 = lib.mkForce no;
      MFD_RK8XX_I2C = lib.mkForce no;
      MFD_RK8XX_SPI = lib.mkForce no;
      MFD_RN5T618 = lib.mkForce no;
      MFD_SEC_I2C = lib.mkForce no;
      MFD_SI476X_CORE = lib.mkForce no;
      MFD_SM501 = lib.mkForce no;
      MFD_SKY81452 = lib.mkForce no;
      MFD_LP3943 = lib.mkForce no;
      MFD_TI_LMU = lib.mkForce no;
      MFD_PALMAS = lib.mkForce no;
      MFD_TPS65217 = lib.mkForce no;
      MFD_TI_LP873X = lib.mkForce no;
      MFD_TI_LP87565 = lib.mkForce no;
      MFD_TPS65218 = lib.mkForce no;
      MFD_TPS65219 = lib.mkForce no;
      MFD_TPS65912_I2C = lib.mkForce no;
      MFD_TPS65912_SPI = lib.mkForce no;
      MFD_TPS6594_I2C = lib.mkForce no;
      MFD_TPS6594_SPI = lib.mkForce no;
      MFD_WL1273_CORE = lib.mkForce no;
      MFD_LM3533 = lib.mkForce no;
      MFD_TQMX86 = lib.mkForce no;
      MFD_VX855 = lib.mkForce no;
      MFD_ARIZONA_I2C = lib.mkForce no;
      MFD_ARIZONA_SPI = lib.mkForce no;
      MFD_WM8994 = lib.mkForce no;
      MFD_ROHM_BD718XX = lib.mkForce no;
      MFD_ROHM_BD71828 = lib.mkForce no;
      MFD_ROHM_BD957XMUF = lib.mkForce no;
      MFD_ROHM_BD96801 = lib.mkForce no;
      MFD_STPMIC1 = lib.mkForce no;
      # MFD_STMFX = lib.mkForce no;
      MFD_ATC260X_I2C = lib.mkForce no;
      MFD_QCOM_PM8008 = lib.mkForce no;
      MFD_CS40L50_I2C = lib.mkForce no;
      MFD_CS40L50_SPI = lib.mkForce no;
      MFD_INTEL_M10_BMC_SPI = lib.mkForce no;
      MFD_QNAP_MCU = lib.mkForce no;
      MFD_RSMU_I2C = lib.mkForce no;
      MFD_RSMU_SPI = lib.mkForce no;
      MFD_UPBOARD_FPGA = lib.mkForce no;
    };
  };

  localmod-unused-net-vendors = with lib.kernel; {
    name = "localmod-unused-net-vendors";
    patch = null;  
    extraStructuredConfig = {
      # NET_VENDOR_AMD = lib.mkForce no;
      # NET_VENDOR_CISCO = lib.mkForce no; # Stupid option merging...
      # NET_VENDOR_EMULEX = lib.mkForce unset; # Stupid option merging...
      # NET_VENDOR_INTEL = lib.mkForce no;  # keep if you have Intel NICs
      # Net vendor can save a tooon of time
      NET_VENDOR_3COM = lib.mkForce no;
      NET_VENDOR_ADAPTEC = lib.mkForce no;
      NET_VENDOR_ADI = lib.mkForce no;
      NET_VENDOR_AGERE = lib.mkForce no;
      NET_VENDOR_ALACRITECH = lib.mkForce no;
      NET_VENDOR_ALTEON = lib.mkForce no;
      NET_VENDOR_AMAZON = lib.mkForce no;
      NET_VENDOR_AQUANTIA = lib.mkForce no;
      NET_VENDOR_ARC = lib.mkForce no;
      NET_VENDOR_ASIX = lib.mkForce no;
      NET_VENDOR_ATHEROS = lib.mkForce no;
      NET_VENDOR_BROADCOM = lib.mkForce no;
      NET_VENDOR_BROCADE = lib.mkForce no;
      NET_VENDOR_CADENCE = lib.mkForce no;
      NET_VENDOR_CAVIUM = lib.mkForce no;
      NET_VENDOR_CHELSIO = lib.mkForce no;
      NET_VENDOR_CORTINA = lib.mkForce no;
      NET_VENDOR_DAVICOM = lib.mkForce no;
      NET_VENDOR_DEC = lib.mkForce no;
      NET_VENDOR_DLINK = lib.mkForce no;
      NET_VENDOR_ENGLEDER = lib.mkForce no;
      NET_VENDOR_EZCHIP = lib.mkForce no;
      NET_VENDOR_FUNGIBLE = lib.mkForce no;
      NET_VENDOR_GOOGLE = lib.mkForce no;
      NET_VENDOR_HISILICON = lib.mkForce no;
      NET_VENDOR_HUAWEI = lib.mkForce no;
      NET_VENDOR_I825XX = lib.mkForce unset;
      NET_VENDOR_INTEL = lib.mkForce no;
      NET_VENDOR_LITEX = lib.mkForce no;
      NET_VENDOR_MARVELL = lib.mkForce no;
      # NET_VENDOR_MELLANOX = lib.mkForce no; # TODO wut??
      NET_VENDOR_META = lib.mkForce no;
      NET_VENDOR_MICREL = lib.mkForce no;
      NET_VENDOR_MICROCHIP = lib.mkForce no;
      NET_VENDOR_MICROSEMI = lib.mkForce no;
      NET_VENDOR_MICROSOFT = lib.mkForce no;
      NET_VENDOR_MYRI = lib.mkForce no;
      NET_VENDOR_NATSEMI = lib.mkForce no;
      NET_VENDOR_NETERION = lib.mkForce no;
      NET_VENDOR_NETRONOME = lib.mkForce no;
      NET_VENDOR_NI = lib.mkForce no;
      NET_VENDOR_NVIDIA = lib.mkForce no;
      NET_VENDOR_OKI = lib.mkForce no;
      NET_VENDOR_PACKET_ENGINES = lib.mkForce no;
      NET_VENDOR_PENSANDO = lib.mkForce no;
      NET_VENDOR_QLOGIC = lib.mkForce no;
      NET_VENDOR_QUALCOMM = lib.mkForce no;
      NET_VENDOR_RDC = lib.mkForce no;
      NET_VENDOR_REALTEK = lib.mkForce no;
      NET_VENDOR_RENESAS = lib.mkForce no;
      NET_VENDOR_ROCKER = lib.mkForce no;
      NET_VENDOR_SAMSUNG = lib.mkForce no;
      NET_VENDOR_SEEQ = lib.mkForce no;
      NET_VENDOR_SILAN = lib.mkForce no;
      NET_VENDOR_SIS = lib.mkForce no;
      NET_VENDOR_SMSC = lib.mkForce no;
      NET_VENDOR_SOCIONEXT = lib.mkForce no;
      NET_VENDOR_SOLARFLARE = lib.mkForce no;
      NET_VENDOR_STMICRO = lib.mkForce no;
      NET_VENDOR_SUN = lib.mkForce no;
      NET_VENDOR_SYNOPSYS = lib.mkForce no;
      NET_VENDOR_TEHUTI = lib.mkForce no;
      NET_VENDOR_TI = lib.mkForce no;
      NET_VENDOR_VERTEXCOM = lib.mkForce no;
      NET_VENDOR_VIA = lib.mkForce no;
      NET_VENDOR_WANGXUN = lib.mkForce no;
      NET_VENDOR_WIZNET = lib.mkForce no;
      NET_VENDOR_XILINX = lib.mkForce no;
    };
  };

  localmod-unused-regulators = {
    name = "localmod-unused-regulators";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      # REGULATOR_FIXED_VOLTAGE = lib.mkForce no;
      REGULATOR_88PG86X = lib.mkForce no;
      REGULATOR_88PM800 = lib.mkForce no;
      REGULATOR_ACT8865 = lib.mkForce no;
      REGULATOR_ACT8945A = lib.mkForce no;
      REGULATOR_AD5398 = lib.mkForce no;
      REGULATOR_ADP5055 = lib.mkForce no;
      REGULATOR_ARIZONA_LDO1 = lib.mkForce no;
      REGULATOR_ARIZONA_MICSUPP = lib.mkForce no;
      REGULATOR_AS3722 = lib.mkForce no;
      REGULATOR_ATC260X = lib.mkForce no;
      REGULATOR_AW37503 = lib.mkForce no;
      REGULATOR_AXP20X = lib.mkForce no;
      REGULATOR_BCM590XX = lib.mkForce no;
      REGULATOR_BD71815 = lib.mkForce no;
      REGULATOR_BD71828 = lib.mkForce no;
      REGULATOR_BD718XX = lib.mkForce no;
      REGULATOR_BD9571MWV = lib.mkForce no;
      REGULATOR_BD957XMUF = lib.mkForce no;
      REGULATOR_BD96801 = lib.mkForce no;
      REGULATOR_CPCAP = lib.mkForce no;
      REGULATOR_CROS_EC = lib.mkForce no;
      REGULATOR_DA9062 = lib.mkForce no;
      REGULATOR_DA9063 = lib.mkForce no;
      REGULATOR_DA9121 = lib.mkForce no;
      REGULATOR_DA9210 = lib.mkForce no;
      REGULATOR_DA9211 = lib.mkForce no;
      REGULATOR_FAN53555 = lib.mkForce no;
      REGULATOR_FAN53880 = lib.mkForce no;
      REGULATOR_GPIO = lib.mkForce no;
      REGULATOR_HI6421 = lib.mkForce no;
      REGULATOR_HI6421V530 = lib.mkForce no;
      REGULATOR_HI6421V600 = lib.mkForce no;
      REGULATOR_ISL6271A = lib.mkForce no;
      REGULATOR_ISL9305 = lib.mkForce no;
      REGULATOR_LM363X = lib.mkForce no;
      REGULATOR_LP3971 = lib.mkForce no;
      REGULATOR_LP3972 = lib.mkForce no;
      REGULATOR_LP872X = lib.mkForce no;
      REGULATOR_LP873X = lib.mkForce no;
      REGULATOR_LP8755 = lib.mkForce no;
      REGULATOR_LP87565 = lib.mkForce no;
      REGULATOR_LTC3589 = lib.mkForce no;
      REGULATOR_LTC3676 = lib.mkForce no;
      REGULATOR_MAX14577 = lib.mkForce no;
      REGULATOR_MAX1586 = lib.mkForce no;
      REGULATOR_MAX20086 = lib.mkForce no;
      REGULATOR_MAX20411 = lib.mkForce no;
      REGULATOR_MAX5970 = lib.mkForce no;
      REGULATOR_MAX77503 = lib.mkForce no;
      REGULATOR_MAX77541 = lib.mkForce no;
      REGULATOR_MAX77620 = lib.mkForce no;
      REGULATOR_MAX77650 = lib.mkForce no;
      REGULATOR_MAX77686 = lib.mkForce no;
      REGULATOR_MAX77693 = lib.mkForce no;
      REGULATOR_MAX77802 = lib.mkForce no;
      REGULATOR_MAX77826 = lib.mkForce no;
      REGULATOR_MAX77857 = lib.mkForce no;
      REGULATOR_MAX8649 = lib.mkForce no;
      REGULATOR_MAX8660 = lib.mkForce no;
      REGULATOR_MAX8893 = lib.mkForce no;
      REGULATOR_MAX8907 = lib.mkForce no;
      REGULATOR_MAX8952 = lib.mkForce no;
      REGULATOR_MAX8973 = lib.mkForce no;
      REGULATOR_MC13783 = lib.mkForce no;
      REGULATOR_MC13892 = lib.mkForce no;
      # REGULATOR_MC13XXX_CORE = lib.mkForce no; # unset
      REGULATOR_MCP16502 = lib.mkForce no;
      REGULATOR_MP5416 = lib.mkForce no;
      REGULATOR_MP8859 = lib.mkForce no;
      REGULATOR_MP886X = lib.mkForce no;
      REGULATOR_MPQ7920 = lib.mkForce no;
      REGULATOR_MT6311 = lib.mkForce no;
      REGULATOR_MT6315 = lib.mkForce no;
      REGULATOR_MT6323 = lib.mkForce no;
      REGULATOR_MT6331 = lib.mkForce no;
      REGULATOR_MT6332 = lib.mkForce no;
      REGULATOR_MT6357 = lib.mkForce no;
      REGULATOR_MT6358 = lib.mkForce no;
      REGULATOR_MT6359 = lib.mkForce no;
      REGULATOR_MT6360 = lib.mkForce no;
      REGULATOR_MT6370 = lib.mkForce no;
      REGULATOR_MT6397 = lib.mkForce no;
      REGULATOR_PALMAS = lib.mkForce no;
      REGULATOR_PCA9450 = lib.mkForce no;
      REGULATOR_PF8X00 = lib.mkForce no;
      REGULATOR_PF9453 = lib.mkForce no;
      REGULATOR_PFUZE100 = lib.mkForce no;
      REGULATOR_PV88060 = lib.mkForce no;
      REGULATOR_PV88080 = lib.mkForce no;
      REGULATOR_PV88090 = lib.mkForce no;
      REGULATOR_PWM = lib.mkForce no;
      REGULATOR_QCOM_LABIBB = lib.mkForce no;
      REGULATOR_QCOM_PM8008 = lib.mkForce no;
      REGULATOR_QCOM_SPMI = lib.mkForce no;
      REGULATOR_QCOM_USB_VBUS = lib.mkForce no;
      REGULATOR_RAA215300 = lib.mkForce no;
      REGULATOR_RASPBERRYPI_TOUCHSCREEN_ATTINY = lib.mkForce no;
      REGULATOR_RK808 = lib.mkForce no;
      REGULATOR_RN5T618 = lib.mkForce no;
      # REGULATOR_ROHM = lib.mkForce no; # was unset
      REGULATOR_RT4801 = lib.mkForce no;
      REGULATOR_RT4803 = lib.mkForce no;
      REGULATOR_RT4831 = lib.mkForce no;
      REGULATOR_RT5033 = lib.mkForce no;
      REGULATOR_RT5120 = lib.mkForce no;
      REGULATOR_RT5190A = lib.mkForce no;
      REGULATOR_RT5739 = lib.mkForce no;
      REGULATOR_RT5759 = lib.mkForce no;
      REGULATOR_RT6160 = lib.mkForce no;
      REGULATOR_RT6190 = lib.mkForce no;
      REGULATOR_RT6245 = lib.mkForce no;
      REGULATOR_RTMV20 = lib.mkForce no;
      REGULATOR_RTQ2134 = lib.mkForce no;
      REGULATOR_RTQ2208 = lib.mkForce no;
      REGULATOR_RTQ6752 = lib.mkForce no;
      REGULATOR_S2MPA01 = lib.mkForce no;
      REGULATOR_S2MPS11 = lib.mkForce no;
      REGULATOR_S5M8767 = lib.mkForce no;
      REGULATOR_SKY81452 = lib.mkForce no;
      REGULATOR_SLG51000 = lib.mkForce no;
      REGULATOR_STPMIC1 = lib.mkForce no;
      REGULATOR_SY7636A = lib.mkForce no;
      REGULATOR_SY8106A = lib.mkForce no;
      REGULATOR_SY8824X = lib.mkForce no;
      REGULATOR_SY8827N = lib.mkForce no;
      REGULATOR_TPS51632 = lib.mkForce no;
      REGULATOR_TPS6105X = lib.mkForce no;
      REGULATOR_TPS62360 = lib.mkForce no;
      REGULATOR_TPS6286X = lib.mkForce no;
      REGULATOR_TPS6287X = lib.mkForce no;
      REGULATOR_TPS65023 = lib.mkForce no;
      REGULATOR_TPS6507X = lib.mkForce no;
      REGULATOR_TPS65086 = lib.mkForce no;
      REGULATOR_TPS65132 = lib.mkForce no;
      REGULATOR_TPS65217 = lib.mkForce no;
      REGULATOR_TPS65218 = lib.mkForce no;
      REGULATOR_TPS65219 = lib.mkForce no;
      REGULATOR_TPS6524X = lib.mkForce no;
      REGULATOR_TPS65912 = lib.mkForce no;
      REGULATOR_TPS6594 = lib.mkForce no;
      # REGULATOR_TPS68470 = lib.mkForce no;
      REGULATOR_USERSPACE_CONSUMER = lib.mkForce no;
      REGULATOR_VCTRL = lib.mkForce no;
      REGULATOR_VIRTUAL_CONSUMER = lib.mkForce no;
      REGULATOR_WM8994 = lib.mkForce no;
    };
  };

  localmod-unused-rtc = {
    name = "localmod-unused-rtc";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      RTC_DRV_TEST = lib.mkForce no;
      RTC_DRV_ABB5ZES3 = lib.mkForce no;
      RTC_DRV_ABEOZ9 = lib.mkForce no;
      RTC_DRV_ABX80X = lib.mkForce no;
      RTC_DRV_DS1307 = lib.mkForce no;
      RTC_DRV_DS1374 = lib.mkForce no;
      RTC_DRV_DS1672 = lib.mkForce no;
      RTC_DRV_HYM8563 = lib.mkForce no;
      RTC_DRV_MAX6900 = lib.mkForce no;
      RTC_DRV_MAX31335 = lib.mkForce no;
      RTC_DRV_NCT3018Y = lib.mkForce no;
      RTC_DRV_RS5C372 = lib.mkForce no;
      RTC_DRV_ISL1208 = lib.mkForce no;
      RTC_DRV_ISL12022 = lib.mkForce no;
      RTC_DRV_ISL12026 = lib.mkForce no;
      RTC_DRV_X1205 = lib.mkForce no;
      RTC_DRV_PCF8523 = lib.mkForce no;
      RTC_DRV_PCF85063 = lib.mkForce no;
      RTC_DRV_PCF85363 = lib.mkForce no;
      RTC_DRV_PCF8563 = lib.mkForce no;
      RTC_DRV_PCF8583 = lib.mkForce no;
      RTC_DRV_M41T80 = lib.mkForce no;
      RTC_DRV_BQ32K = lib.mkForce no;
      RTC_DRV_S35390A = lib.mkForce no;
      RTC_DRV_FM3130 = lib.mkForce no;
      RTC_DRV_RX8010 = lib.mkForce no;
      RTC_DRV_RX8111 = lib.mkForce no;
      RTC_DRV_RX8581 = lib.mkForce no;
      RTC_DRV_RX8025 = lib.mkForce no;
      RTC_DRV_EM3027 = lib.mkForce no;
      RTC_DRV_RV3028 = lib.mkForce no;
      RTC_DRV_RV3032 = lib.mkForce no;
      RTC_DRV_RV8803 = lib.mkForce no;
      RTC_DRV_SD2405AL = lib.mkForce no;
      RTC_DRV_SD3078 = lib.mkForce no;
      RTC_DRV_M41T93 = lib.mkForce no;
      RTC_DRV_M41T94 = lib.mkForce no;
      RTC_DRV_DS1302 = lib.mkForce no;
      RTC_DRV_DS1305 = lib.mkForce no;
      RTC_DRV_DS1343 = lib.mkForce no;
      RTC_DRV_DS1347 = lib.mkForce no;
      RTC_DRV_DS1390 = lib.mkForce no;
      RTC_DRV_MAX6916 = lib.mkForce no;
      RTC_DRV_R9701 = lib.mkForce no;
      RTC_DRV_RX4581 = lib.mkForce no;
      RTC_DRV_RS5C348 = lib.mkForce no;
      RTC_DRV_MAX6902 = lib.mkForce no;
      RTC_DRV_PCF2123 = lib.mkForce no;
      RTC_DRV_MCP795 = lib.mkForce no;
      RTC_DRV_DS3232 = lib.mkForce no;
      RTC_DRV_PCF2127 = lib.mkForce no;
      RTC_DRV_RV3029C2 = lib.mkForce no;
      RTC_DRV_RX6110 = lib.mkForce no;
      RTC_DRV_DS1286 = lib.mkForce no;
      RTC_DRV_DS1511 = lib.mkForce no;
      RTC_DRV_DS1553 = lib.mkForce no;
      RTC_DRV_DS1685_FAMILY = lib.mkForce no;
      RTC_DRV_DS1742 = lib.mkForce no;
      RTC_DRV_DS2404 = lib.mkForce no;
      RTC_DRV_STK17TA8 = lib.mkForce no;
      RTC_DRV_M48T86 = lib.mkForce no;
      RTC_DRV_M48T35 = lib.mkForce no;
      RTC_DRV_M48T59 = lib.mkForce no;
      RTC_DRV_MSM6242 = lib.mkForce no;
      RTC_DRV_RP5C01 = lib.mkForce no;
      RTC_DRV_ZYNQMP = lib.mkForce no;
      RTC_DRV_CADENCE = lib.mkForce no;
      RTC_DRV_FTRTC010 = lib.mkForce no;
      RTC_DRV_R7301 = lib.mkForce no;
      RTC_DRV_GOLDFISH = lib.mkForce no;    
    };
  };

  localmod-unused-sensors = {
    name = "localmode-unused-sensors";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      SENSORS_APDS990X = lib.mkForce no;
      SENSORS_BH1770 = lib.mkForce no;
      SENSORS_HDAPS = lib.mkForce no;
      SENSORS_LIS3_I2C = lib.mkForce no;
      SENSORS_TSL2550 = lib.mkForce no;
      SENSORS_ABITUGURU = lib.mkForce no;
      SENSORS_ABITUGURU3 = lib.mkForce no;
      SENSORS_AD7314 = lib.mkForce no;
      SENSORS_AD7414 = lib.mkForce no;
      SENSORS_AD7418 = lib.mkForce no;
      SENSORS_ADM1025 = lib.mkForce no;
      SENSORS_ADM1026 = lib.mkForce no;
      SENSORS_ADM1029 = lib.mkForce no;
      SENSORS_ADM1031 = lib.mkForce no;
      SENSORS_ADM1177 = lib.mkForce no;
      SENSORS_ADM9240 = lib.mkForce no;
      SENSORS_ADT7310 = lib.mkForce no;
      SENSORS_ADT7410 = lib.mkForce no;
      SENSORS_ADT7411 = lib.mkForce no;
      SENSORS_ADT7462 = lib.mkForce no;
      SENSORS_ADT7470 = lib.mkForce no;
      SENSORS_ADT7475 = lib.mkForce no;
      SENSORS_AHT10 = lib.mkForce no;
      SENSORS_AQUACOMPUTER_D5NEXT = lib.mkForce no;
      SENSORS_AS370 = lib.mkForce no;
      SENSORS_ASC7621 = lib.mkForce no;
      SENSORS_ASUS_ROG_RYUJIN = lib.mkForce no;
      SENSORS_AXI_FAN_CONTROL = lib.mkForce no;
      SENSORS_K8TEMP = lib.mkForce no;
      SENSORS_FAM15H_POWER = lib.mkForce no;
      SENSORS_APPLESMC = lib.mkForce no;
      SENSORS_ASB100 = lib.mkForce no;
      SENSORS_ATXP1 = lib.mkForce no;
      SENSORS_CHIPCAP2 = lib.mkForce no;
      SENSORS_CORSAIR_CPRO = lib.mkForce no;
      SENSORS_CORSAIR_PSU = lib.mkForce no;
      SENSORS_DS620 = lib.mkForce no;
      SENSORS_DS1621 = lib.mkForce no;
      SENSORS_DELL_SMM = lib.mkForce no;
      SENSORS_I5K_AMB = lib.mkForce no;
      SENSORS_F71805F = lib.mkForce no;
      SENSORS_F71882FG = lib.mkForce no;
      SENSORS_F75375S = lib.mkForce no;
      SENSORS_FSCHMD = lib.mkForce no;
      SENSORS_FTSTEUTATES = lib.mkForce no;
      SENSORS_GIGABYTE_WATERFORCE = lib.mkForce no;
      SENSORS_GL518SM = lib.mkForce no;
      SENSORS_GL520SM = lib.mkForce no;
      SENSORS_G760A = lib.mkForce no;
      SENSORS_G762 = lib.mkForce no;
      SENSORS_GPIO_FAN = lib.mkForce no;
      SENSORS_HIH6130 = lib.mkForce no;
      SENSORS_HS3001 = lib.mkForce no;
      SENSORS_HTU31 = lib.mkForce no;
      SENSORS_I5500 = lib.mkForce no;
      SENSORS_CORETEMP = lib.mkForce no;
      SENSORS_ISL28022 = lib.mkForce no;
      SENSORS_IT87 = lib.mkForce no;
      SENSORS_JC42 = lib.mkForce no;
      SENSORS_POWERZ = lib.mkForce no;
      SENSORS_POWR1220 = lib.mkForce no;
      SENSORS_LENOVO_EC = lib.mkForce no;
      SENSORS_LINEAGE = lib.mkForce no;
      SENSORS_LTC2945 = lib.mkForce no;
      SENSORS_LTC2947_I2C = lib.mkForce no;
      SENSORS_LTC2947_SPI = lib.mkForce no;
      SENSORS_LTC2990 = lib.mkForce no;
      SENSORS_LTC2991 = lib.mkForce no;
      SENSORS_LTC2992 = lib.mkForce no;
      SENSORS_LTC4151 = lib.mkForce no;
      SENSORS_LTC4215 = lib.mkForce no;
      SENSORS_LTC4222 = lib.mkForce no;
      SENSORS_LTC4245 = lib.mkForce no;
      SENSORS_LTC4260 = lib.mkForce no;
      SENSORS_LTC4261 = lib.mkForce no;
      SENSORS_LTC4282 = lib.mkForce no;
      SENSORS_MAX1111 = lib.mkForce no;
      SENSORS_MAX127 = lib.mkForce no;
      SENSORS_MAX16065 = lib.mkForce no;
      SENSORS_MAX1619 = lib.mkForce no;
      SENSORS_MAX1668 = lib.mkForce no;
      SENSORS_MAX197 = lib.mkForce no;
      SENSORS_MAX31722 = lib.mkForce no;
      SENSORS_MAX31730 = lib.mkForce no;
      SENSORS_MAX31760 = lib.mkForce no;
      SENSORS_MAX6620 = lib.mkForce no;
      SENSORS_MAX6621 = lib.mkForce no;
      SENSORS_MAX6639 = lib.mkForce no;
      SENSORS_MAX6650 = lib.mkForce no;
      SENSORS_MAX6697 = lib.mkForce no;
      SENSORS_MAX31790 = lib.mkForce no;
      SENSORS_MC34VR500 = lib.mkForce no;
      SENSORS_MCP3021 = lib.mkForce no;
      SENSORS_TC654 = lib.mkForce no;
      SENSORS_TPS23861 = lib.mkForce no;
      SENSORS_MR75203 = lib.mkForce no;
      SENSORS_ADCXX = lib.mkForce no;
      SENSORS_LM63 = lib.mkForce no;
      SENSORS_LM70 = lib.mkForce no;
      SENSORS_LM73 = lib.mkForce no;
      SENSORS_LM75 = lib.mkForce no;
      SENSORS_LM77 = lib.mkForce no;
      SENSORS_LM78 = lib.mkForce no;
      SENSORS_LM80 = lib.mkForce no;
      SENSORS_LM83 = lib.mkForce no;
      SENSORS_LM85 = lib.mkForce no;
      SENSORS_LM87 = lib.mkForce no;
      SENSORS_LM90 = lib.mkForce no;
      SENSORS_LM92 = lib.mkForce no;
      SENSORS_LM93 = lib.mkForce no;
      SENSORS_LM95234 = lib.mkForce no;
      SENSORS_LM95241 = lib.mkForce no;
      SENSORS_LM95245 = lib.mkForce no;
      SENSORS_PC87360 = lib.mkForce no;
      SENSORS_PC87427 = lib.mkForce no;
      SENSORS_NCT6683 = lib.mkForce no;
      SENSORS_NCT6775 = lib.mkForce no;
      SENSORS_NCT6775_I2C = lib.mkForce no;
      SENSORS_NCT7363 = lib.mkForce no;
      SENSORS_NCT7802 = lib.mkForce no;
      SENSORS_NCT7904 = lib.mkForce no;
      SENSORS_NPCM7XX = lib.mkForce no;
      SENSORS_NZXT_KRAKEN2 = lib.mkForce no;
      SENSORS_NZXT_KRAKEN3 = lib.mkForce no;
      SENSORS_NZXT_SMART2 = lib.mkForce no;
      SENSORS_OCC_P8_I2C = lib.mkForce no;
      SENSORS_PCF8591 = lib.mkForce no;
      SENSORS_PT5161L = lib.mkForce no;
      SENSORS_PWM_FAN = lib.mkForce no;
      SENSORS_SBTSI = lib.mkForce no;
      SENSORS_SHT15 = lib.mkForce no;
      SENSORS_SHT21 = lib.mkForce no;
      SENSORS_SHT3x = lib.mkForce no;
      SENSORS_SHT4x = lib.mkForce no;
      SENSORS_SHTC1 = lib.mkForce no;
      SENSORS_SIS5595 = lib.mkForce no;
      SENSORS_DME1737 = lib.mkForce no;
      SENSORS_EMC1403 = lib.mkForce no;
      SENSORS_EMC2103 = lib.mkForce no;
      SENSORS_EMC2305 = lib.mkForce no;
      SENSORS_EMC6W201 = lib.mkForce no;
      SENSORS_SMSC47M1 = lib.mkForce no;
      SENSORS_SMSC47M192 = lib.mkForce no;
      SENSORS_SMSC47B397 = lib.mkForce no;
      SENSORS_SCH5627 = lib.mkForce no;
      SENSORS_SCH5636 = lib.mkForce no;
      SENSORS_STTS751 = lib.mkForce no;
      SENSORS_ADC128D818 = lib.mkForce no;
      SENSORS_ADS7828 = lib.mkForce no;
      SENSORS_ADS7871 = lib.mkForce no;
      SENSORS_AMC6821 = lib.mkForce no;
      SENSORS_INA209 = lib.mkForce no;
      SENSORS_INA2XX = lib.mkForce no;
      SENSORS_INA238 = lib.mkForce no;
      SENSORS_INA3221 = lib.mkForce no;
      SENSORS_SPD5118 = lib.mkForce no;
      SENSORS_TC74 = lib.mkForce no;
      SENSORS_THMC50 = lib.mkForce no;
      SENSORS_TMP102 = lib.mkForce no;
      SENSORS_TMP103 = lib.mkForce no;
      SENSORS_TMP108 = lib.mkForce no;
      SENSORS_TMP401 = lib.mkForce no;
      SENSORS_TMP421 = lib.mkForce no;
      SENSORS_TMP464 = lib.mkForce no;
      SENSORS_TMP513 = lib.mkForce no;
      SENSORS_VIA_CPUTEMP = lib.mkForce no;
      SENSORS_VIA686A = lib.mkForce no;
      SENSORS_VT1211 = lib.mkForce no;
      SENSORS_VT8231 = lib.mkForce no;
      SENSORS_W83773G = lib.mkForce no;
      SENSORS_W83781D = lib.mkForce no;
      SENSORS_W83791D = lib.mkForce no;
      SENSORS_W83792D = lib.mkForce no;
      SENSORS_W83793 = lib.mkForce no;
      SENSORS_W83795 = lib.mkForce no;
      SENSORS_W83L785TS = lib.mkForce no;
      SENSORS_W83L786NG = lib.mkForce no;
      SENSORS_W83627HF = lib.mkForce no;
      SENSORS_W83627EHF = lib.mkForce no;
      SENSORS_XGENE = lib.mkForce no;
      SENSORS_ACPI_POWER = lib.mkForce no;
      SENSORS_ATK0110 = lib.mkForce no;
      SENSORS_ASUS_WMI = lib.mkForce no;
      SENSORS_ASUS_EC = lib.mkForce no;
      SENSORS_HP_WMI = lib.mkForce no;
    };
  };

  localmod-unused-snd = with lib.kernel; {
    name = "localmod-unused-snd";
    patch = null;
    extraStructuredConfig = {
      SND_AD1889 = lib.mkForce no;
      SND_ALI5451 = lib.mkForce no;
      SND_ALOOP = lib.mkForce no;
      SND_ALS300 = lib.mkForce no;
      SND_AMD_ASOC_ACP63 = lib.mkForce no;
      SND_AMD_ASOC_ACP70 = lib.mkForce no;
      SND_AMD_ASOC_REMBRANDT = lib.mkForce no;
      SND_AMD_ASOC_RENOIR = lib.mkForce no;
      SND_ASIHPI = lib.mkForce no;
      SND_ATIIXP = lib.mkForce no;
      SND_ATIIXP_MODEM = lib.mkForce no;
      SND_ATMEL_SOC = lib.mkForce no;
      SND_AU8810 = lib.mkForce no;
      SND_AU8820 = lib.mkForce no;
      SND_AU8830 = lib.mkForce no;
      SND_AUDIO_GRAPH_CARD = lib.mkForce no;
      SND_AUDIO_GRAPH_CARD2 = lib.mkForce no;
      SND_AW2 = lib.mkForce no;
      SND_AZT3328 = lib.mkForce no;
      SND_BCD2000 = lib.mkForce no;
      SND_BCM63XX_I2S_WHISTLER = lib.mkForce no;
      SND_BT87X = lib.mkForce no;
      SND_CA0106 = lib.mkForce no;
      SND_CMIPCI = lib.mkForce no;
      SND_CS4281 = lib.mkForce no;
      SND_CS46XX = lib.mkForce no;
      SND_CTXFI = lib.mkForce no;
      SND_DARLA20 = lib.mkForce no;
      SND_DARLA24 = lib.mkForce no;
      SND_DESIGNWARE_I2S = lib.mkForce no;
      SND_DUMMY = lib.mkForce no;
      SND_ECHO3G = lib.mkForce no;
      SND_EMU10K1 = lib.mkForce no;
      SND_EMU10K1X = lib.mkForce no;
      SND_ENS1370 = lib.mkForce no;
      SND_ENS1371 = lib.mkForce no;
      SND_ES1938 = lib.mkForce no;
      SND_ES1968 = lib.mkForce no;
      SND_FM801 = lib.mkForce no;
      SND_GINA20 = lib.mkForce no;
      SND_GINA24 = lib.mkForce no;
      SND_HDA_ACPI = lib.mkForce no;
      SND_HDA_CODEC_ANALOG = lib.mkForce no;
      SND_HDA_CODEC_CA0110 = lib.mkForce no;
      SND_HDA_CODEC_CA0132 = lib.mkForce no;
      SND_HDA_CODEC_CIRRUS = lib.mkForce no;
      SND_HDA_CODEC_CMEDIA = lib.mkForce no;
      SND_HDA_CODEC_CONEXANT = lib.mkForce no;
      SND_HDA_CODEC_CS8409 = lib.mkForce no;
      SND_HDA_CODEC_SENARYTECH = lib.mkForce no;
      SND_HDA_CODEC_SI3054 = lib.mkForce no;
      SND_HDA_CODEC_SIGMATEL = lib.mkForce no;
      SND_HDA_CODEC_VIA = lib.mkForce no;
      SND_HDA_SCODEC_CS35L41_I2C = lib.mkForce no;
      SND_HDA_SCODEC_CS35L41_SPI = lib.mkForce no;
      SND_HDA_SCODEC_CS35L56_I2C = lib.mkForce no;
      SND_HDA_SCODEC_CS35L56_SPI = lib.mkForce no;
      SND_HDA_SCODEC_TAS2781_I2C = lib.mkForce no;
      SND_HDA_SCODEC_TAS2781_SPI = lib.mkForce no;
      SND_HDSP = lib.mkForce no;
      SND_HDSPM = lib.mkForce no;
      SND_I2S_HI6210_I2S = lib.mkForce no;
      SND_ICE1712 = lib.mkForce no;
      SND_ICE1724 = lib.mkForce no;
      SND_INDIGO = lib.mkForce no;
      SND_INDIGODJ = lib.mkForce no;
      SND_INDIGODJX = lib.mkForce no;
      SND_INDIGOIO = lib.mkForce no;
      SND_INDIGOIOX = lib.mkForce no;
      SND_INTEL8X0 = lib.mkForce no;
      SND_INTEL8X0M = lib.mkForce no;
      SND_KORG1212 = lib.mkForce no;
      SND_LAYLA20 = lib.mkForce no;
      SND_LAYLA24 = lib.mkForce no;
      SND_LOLA = lib.mkForce no;
      SND_LX6464ES = lib.mkForce no;
      SND_MAESTRO3 = lib.mkForce no;
      SND_MIA = lib.mkForce no;
      SND_MIXART = lib.mkForce no;
      SND_MIXER_OSS = lib.mkForce no;
      SND_MONA = lib.mkForce no;
      SND_MPU401 = lib.mkForce no;
      SND_MTPAV = lib.mkForce no;
      SND_NM256 = lib.mkForce no;
      SND_OXYGEN = lib.mkForce no;
      SND_PCMTEST = lib.mkForce no;
      SND_PCM_OSS = lib.mkForce no;
      SND_PCSP = lib.mkForce no;
      SND_PCXHR = lib.mkForce no;
      SND_RIPTIDE = lib.mkForce no;
      SND_RME32 = lib.mkForce no;
      SND_RME96 = lib.mkForce no;
      SND_RME9652 = lib.mkForce no;
      SND_SE6X = lib.mkForce no;
      SND_SEQUENCER_OSS = lib.mkForce no;
      SND_SERIAL_GENERIC = lib.mkForce no;
      SND_SERIAL_U16550 = lib.mkForce no;
      SND_SIMPLE_CARD = lib.mkForce no;
      SND_SOC_AC97_CODEC = lib.mkForce no;
      SND_SOC_ADAU1372_I2C = lib.mkForce no;
      SND_SOC_ADAU1372_SPI = lib.mkForce no;
      SND_SOC_ADAU1373 = lib.mkForce no;
      SND_SOC_ADAU1701 = lib.mkForce no;
      SND_SOC_ADAU1761_I2C = lib.mkForce no;
      SND_SOC_ADAU1761_SPI = lib.mkForce no;
      SND_SOC_ADAU7002 = lib.mkForce no;
      SND_SOC_ADAU7118_HW = lib.mkForce no;
      SND_SOC_ADAU7118_I2C = lib.mkForce no;
      SND_SOC_ADI = lib.mkForce no;
      SND_SOC_AK4104 = lib.mkForce no;
      SND_SOC_AK4118 = lib.mkForce no;
      SND_SOC_AK4375 = lib.mkForce no;
      SND_SOC_AK4458 = lib.mkForce no;
      SND_SOC_AK4554 = lib.mkForce no;
      SND_SOC_AK4613 = lib.mkForce no;
      SND_SOC_AK4619 = lib.mkForce no;
      SND_SOC_AK4642 = lib.mkForce no;
      SND_SOC_AK5386 = lib.mkForce no;
      SND_SOC_AK5558 = lib.mkForce no;
      SND_SOC_ALC5623 = lib.mkForce no;
      SND_SOC_AMD_ACP = lib.mkForce no;
      SND_SOC_AMD_LEGACY_MACH = lib.mkForce no;
      SND_SOC_AMD_LEGACY_SDW_MACH = lib.mkForce no;
      SND_SOC_AMD_PS_MACH = lib.mkForce no;
      SND_SOC_AMD_RENOIR_MACH = lib.mkForce no;
      SND_SOC_AMD_SOF_MACH = lib.mkForce no;
      SND_SOC_AMD_SOF_SDW_MACH = lib.mkForce no;
      SND_SOC_AMD_SOUNDWIRE = lib.mkForce no;
      SND_SOC_AMD_VANGOGH_MACH = lib.mkForce no;
      SND_SOC_AMD_YC_MACH = lib.mkForce no;
      SND_SOC_AW8738 = lib.mkForce no;
      SND_SOC_AW87390 = lib.mkForce no;
      SND_SOC_AW88081 = lib.mkForce no;
      SND_SOC_AW88166 = lib.mkForce no;
      SND_SOC_AW88261 = lib.mkForce no;
      SND_SOC_AW88395 = lib.mkForce no;
      SND_SOC_AW88399 = lib.mkForce no;
      SND_SOC_BD28623 = lib.mkForce no;
      SND_SOC_BT_SCO = lib.mkForce no;
      SND_SOC_CHV3_CODEC = lib.mkForce no;
      SND_SOC_CHV3_I2S = lib.mkForce no;
      SND_SOC_CS35L32 = lib.mkForce no;
      SND_SOC_CS35L33 = lib.mkForce no;
      SND_SOC_CS35L34 = lib.mkForce no;
      SND_SOC_CS35L35 = lib.mkForce no;
      SND_SOC_CS35L36 = lib.mkForce no;
      SND_SOC_CS35L41_I2C = lib.mkForce no;
      SND_SOC_CS35L41_SPI = lib.mkForce no;
      SND_SOC_CS35L45_I2C = lib.mkForce no;
      SND_SOC_CS35L45_SPI = lib.mkForce no;
      SND_SOC_CS35L56_I2C = lib.mkForce no;
      SND_SOC_CS35L56_SDW = lib.mkForce no;
      SND_SOC_CS35L56_SPI = lib.mkForce no;
      SND_SOC_CS4234 = lib.mkForce no;
      SND_SOC_CS4265 = lib.mkForce no;
      SND_SOC_CS4270 = lib.mkForce no;
      SND_SOC_CS4271_I2C = lib.mkForce no;
      SND_SOC_CS4271_SPI = lib.mkForce no;
      SND_SOC_CS42L42 = lib.mkForce no;
      SND_SOC_CS42L42_SDW = lib.mkForce no;
      SND_SOC_CS42L51_I2C = lib.mkForce no;
      SND_SOC_CS42L52 = lib.mkForce no;
      SND_SOC_CS42L56 = lib.mkForce no;
      SND_SOC_CS42L73 = lib.mkForce no;
      SND_SOC_CS42L83 = lib.mkForce no;
      SND_SOC_CS42L84 = lib.mkForce no;
      SND_SOC_CS42XX8_I2C = lib.mkForce no;
      SND_SOC_CS43130 = lib.mkForce no;
      SND_SOC_CS4341 = lib.mkForce no;
      SND_SOC_CS4349 = lib.mkForce no;
      SND_SOC_CS48L32 = lib.mkForce no;
      SND_SOC_CS530X_I2C = lib.mkForce no;
      SND_SOC_CS53L30 = lib.mkForce no;
      SND_SOC_CX2072X = lib.mkForce no;
      SND_SOC_DA7213 = lib.mkForce no;
      SND_SOC_DMIC = lib.mkForce no;
      SND_SOC_ES7134 = lib.mkForce no;
      SND_SOC_ES7241 = lib.mkForce no;
      SND_SOC_ES8311 = lib.mkForce no;
      SND_SOC_ES8316 = lib.mkForce no;
      SND_SOC_ES8323 = lib.mkForce no;
      SND_SOC_ES8326 = lib.mkForce no;
      SND_SOC_ES8328_I2C = lib.mkForce no;
      SND_SOC_ES8328_SPI = lib.mkForce no;
      SND_SOC_ES8375 = lib.mkForce no;
      SND_SOC_ES8389 = lib.mkForce no;
      SND_SOC_FSL_ASRC = lib.mkForce no;
      SND_SOC_FSL_AUDMIX = lib.mkForce no;
      SND_SOC_FSL_ESAI = lib.mkForce no;
      SND_SOC_FSL_MICFIL = lib.mkForce no;
      SND_SOC_FSL_SAI = lib.mkForce no;
      SND_SOC_FSL_SPDIF = lib.mkForce no;
      SND_SOC_FSL_SSI = lib.mkForce no;
      SND_SOC_FSL_XCVR = lib.mkForce no;
      SND_SOC_GTM601 = lib.mkForce no;
      SND_SOC_HDA = lib.mkForce no;
      SND_SOC_ICS43432 = lib.mkForce no;
      SND_SOC_IDT821034 = lib.mkForce no;
      SND_SOC_IMX_AUDMUX = lib.mkForce no;
      SND_SOC_INTEL_AVS = lib.mkForce no;
      SND_SOC_INTEL_CATPT = lib.mkForce no;
      SND_SOC_LPASS_RX_MACRO = lib.mkForce no;
      SND_SOC_LPASS_TX_MACRO = lib.mkForce no;
      SND_SOC_LPASS_VA_MACRO = lib.mkForce no;
      SND_SOC_LPASS_WSA_MACRO = lib.mkForce no;
      # SND_SOC_MAX9759 = lib.mkForce no; # Stupid option merging
      SND_SOC_MAX98088 = lib.mkForce no;
      SND_SOC_MAX98090 = lib.mkForce no;
      # SND_SOC_MAX98357A = lib.mkForce no; stupid option merging
      SND_SOC_MAX98363 = lib.mkForce no;
      SND_SOC_MAX98373_I2C = lib.mkForce no;
      SND_SOC_MAX98373_SDW = lib.mkForce no;
      SND_SOC_MAX98388 = lib.mkForce no;
      SND_SOC_MAX98390 = lib.mkForce no;
      SND_SOC_MAX98396 = lib.mkForce no;
      SND_SOC_MAX98504 = lib.mkForce no;
      SND_SOC_MAX98520 = lib.mkForce no;
      SND_SOC_MAX9860 = lib.mkForce no;
      SND_SOC_MAX9867 = lib.mkForce no;
      SND_SOC_MAX98927 = lib.mkForce no;
      SND_SOC_MSM8916_WCD_DIGITAL = lib.mkForce no;
      SND_SOC_MT6351 = lib.mkForce no;
      SND_SOC_MT6357 = lib.mkForce no;
      SND_SOC_MT6358 = lib.mkForce no;
      SND_SOC_MT6660 = lib.mkForce no;
      SND_SOC_MTK_BTCVSD = lib.mkForce no;
      SND_SOC_NAU8315 = lib.mkForce no;
      SND_SOC_NAU8540 = lib.mkForce no;
      SND_SOC_NAU8810 = lib.mkForce no;
      SND_SOC_NAU8821 = lib.mkForce no;
      SND_SOC_NAU8822 = lib.mkForce no;
      SND_SOC_NAU8824 = lib.mkForce no;
      SND_SOC_NTP8835 = lib.mkForce no;
      SND_SOC_NTP8918 = lib.mkForce no;
      SND_SOC_PCM1681 = lib.mkForce no;
      SND_SOC_PCM1789_I2C = lib.mkForce no;
      SND_SOC_PCM179X_I2C = lib.mkForce no;
      SND_SOC_PCM179X_SPI = lib.mkForce no;
      SND_SOC_PCM186X_I2C = lib.mkForce no;
      SND_SOC_PCM186X_SPI = lib.mkForce no;
      SND_SOC_PCM3060_I2C = lib.mkForce no;
      SND_SOC_PCM3060_SPI = lib.mkForce no;
      SND_SOC_PCM3168A_I2C = lib.mkForce no;
      SND_SOC_PCM3168A_SPI = lib.mkForce no;
      SND_SOC_PCM5102A = lib.mkForce no;
      SND_SOC_PCM512x_I2C = lib.mkForce no;
      SND_SOC_PCM512x_SPI = lib.mkForce no;
      SND_SOC_PCM6240 = lib.mkForce no;
      SND_SOC_PEB2466 = lib.mkForce no;
      SND_SOC_RT1017_SDCA_SDW = lib.mkForce no;
      SND_SOC_RT1308_SDW = lib.mkForce no;
      SND_SOC_RT1316_SDW = lib.mkForce no;
      SND_SOC_RT1318_SDW = lib.mkForce no;
      SND_SOC_RT1320_SDW = lib.mkForce no;
      SND_SOC_RT5616 = lib.mkForce no;
      SND_SOC_RT5631 = lib.mkForce no;
      SND_SOC_RT5640 = lib.mkForce no;
      SND_SOC_RT5659 = lib.mkForce no;
      SND_SOC_RT5682_SDW = lib.mkForce no;
      SND_SOC_RT700_SDW = lib.mkForce no;
      SND_SOC_RT711_SDCA_SDW = lib.mkForce no;
      SND_SOC_RT711_SDW = lib.mkForce no;
      SND_SOC_RT712_SDCA_DMIC_SDW = lib.mkForce no;
      SND_SOC_RT712_SDCA_SDW = lib.mkForce no;
      SND_SOC_RT715_SDCA_SDW = lib.mkForce no;
      SND_SOC_RT715_SDW = lib.mkForce no;
      SND_SOC_RT721_SDCA_SDW = lib.mkForce no;
      SND_SOC_RT722_SDCA_SDW = lib.mkForce no;
      SND_SOC_RT9120 = lib.mkForce no;
      SND_SOC_RT9123 = lib.mkForce no;
      SND_SOC_RT9123P = lib.mkForce no;
      SND_SOC_RTQ9128 = lib.mkForce no;
      SND_SOC_SDW_MOCKUP = lib.mkForce no;
      SND_SOC_SGTL5000 = lib.mkForce no;
      SND_SOC_SIMPLE_AMPLIFIER = lib.mkForce no;
      SND_SOC_SIMPLE_MUX = lib.mkForce no;
      SND_SOC_SMA1303 = lib.mkForce no;
      SND_SOC_SMA1307 = lib.mkForce no;
      SND_SOC_SOF_ACPI = lib.mkForce no;
      SND_SOC_SOF_ALDERLAKE = lib.mkForce no;
      SND_SOC_SOF_AMD_SOUNDWIRE = lib.mkForce no;
      SND_SOC_SOF_APOLLOLAKE = lib.mkForce no;
      SND_SOC_SOF_CANNONLAKE = lib.mkForce no;
      SND_SOC_SOF_COFFEELAKE = lib.mkForce no;
      SND_SOC_SOF_COMETLAKE = lib.mkForce no;
      SND_SOC_SOF_ELKHARTLAKE = lib.mkForce no;
      SND_SOC_SOF_GEMINILAKE = lib.mkForce no;
      SND_SOC_SOF_ICELAKE = lib.mkForce no;
      SND_SOC_SOF_JASPERLAKE = lib.mkForce no;
      SND_SOC_SOF_KABYLAKE = lib.mkForce no;
      SND_SOC_SOF_LUNARLAKE = lib.mkForce no;
      SND_SOC_SOF_MERRIFIELD = lib.mkForce no;
      SND_SOC_SOF_METEORLAKE = lib.mkForce no;
      SND_SOC_SOF_OF = lib.mkForce no;
      SND_SOC_SOF_PANTHERLAKE = lib.mkForce no;
      SND_SOC_SOF_SKYLAKE = lib.mkForce no;
      SND_SOC_SOF_TIGERLAKE = lib.mkForce no;
      SND_SOC_SPDIF = lib.mkForce no;
      SND_SOC_SRC4XXX_I2C = lib.mkForce no;
      SND_SOC_SSM2305 = lib.mkForce no;
      SND_SOC_SSM2518 = lib.mkForce no;
      SND_SOC_SSM2602_I2C = lib.mkForce no;
      SND_SOC_SSM2602_SPI = lib.mkForce no;
      SND_SOC_SSM3515 = lib.mkForce no;
      SND_SOC_SSM4567 = lib.mkForce no;
      SND_SOC_STA32X = lib.mkForce no;
      SND_SOC_STA350 = lib.mkForce no;
      SND_SOC_STI_SAS = lib.mkForce no;
      SND_SOC_TAS2552 = lib.mkForce no;
      SND_SOC_TAS2562 = lib.mkForce no;
      SND_SOC_TAS2764 = lib.mkForce no;
      SND_SOC_TAS2770 = lib.mkForce no;
      SND_SOC_TAS2780 = lib.mkForce no;
      SND_SOC_TAS2781_I2C = lib.mkForce no;
      SND_SOC_TAS5086 = lib.mkForce no;
      SND_SOC_TAS571X = lib.mkForce no;
      SND_SOC_TAS5720 = lib.mkForce no;
      SND_SOC_TAS5805M = lib.mkForce no;
      SND_SOC_TAS6424 = lib.mkForce no;
      SND_SOC_TDA7419 = lib.mkForce no;
      SND_SOC_TFA9879 = lib.mkForce no;
      SND_SOC_TFA989X = lib.mkForce no;
      SND_SOC_TLV320ADC3XXX = lib.mkForce no;
      SND_SOC_TLV320ADCX140 = lib.mkForce no;
      SND_SOC_TLV320AIC23_I2C = lib.mkForce no;
      SND_SOC_TLV320AIC23_SPI = lib.mkForce no;
      SND_SOC_TLV320AIC31XX = lib.mkForce no;
      SND_SOC_TLV320AIC32X4_I2C = lib.mkForce no;
      SND_SOC_TLV320AIC32X4_SPI = lib.mkForce no;
      SND_SOC_TLV320AIC3X_I2C = lib.mkForce no;
      SND_SOC_TLV320AIC3X_SPI = lib.mkForce no;
      SND_SOC_TPA6130A2 = lib.mkForce no;
      SND_SOC_TS3A227E = lib.mkForce no;
      SND_SOC_TSCS42XX = lib.mkForce no;
      SND_SOC_TSCS454 = lib.mkForce no;
      SND_SOC_UDA1334 = lib.mkForce no;
      SND_SOC_UDA1342 = lib.mkForce no;
      SND_SOC_USB = lib.mkForce no;
      SND_SOC_WCD937X_SDW = lib.mkForce no;
      SND_SOC_WCD938X_SDW = lib.mkForce no;
      SND_SOC_WCD939X_SDW = lib.mkForce no;
      SND_SOC_WM8510 = lib.mkForce no;
      SND_SOC_WM8523 = lib.mkForce no;
      SND_SOC_WM8524 = lib.mkForce no;
      SND_SOC_WM8580 = lib.mkForce no;
      SND_SOC_WM8711 = lib.mkForce no;
      SND_SOC_WM8728 = lib.mkForce no;
      SND_SOC_WM8731_I2C = lib.mkForce no;
      SND_SOC_WM8731_SPI = lib.mkForce no;
      SND_SOC_WM8737 = lib.mkForce no;
      SND_SOC_WM8741 = lib.mkForce no;
      SND_SOC_WM8750 = lib.mkForce no;
      SND_SOC_WM8753 = lib.mkForce no;
      SND_SOC_WM8770 = lib.mkForce no;
      SND_SOC_WM8776 = lib.mkForce no;
      SND_SOC_WM8782 = lib.mkForce no;
      SND_SOC_WM8804_I2C = lib.mkForce no;
      SND_SOC_WM8804_SPI = lib.mkForce no;
      SND_SOC_WM8903 = lib.mkForce no;
      SND_SOC_WM8904 = lib.mkForce no;
      SND_SOC_WM8940 = lib.mkForce no;
      SND_SOC_WM8960 = lib.mkForce no;
      SND_SOC_WM8961 = lib.mkForce no;
      SND_SOC_WM8962 = lib.mkForce no;
      SND_SOC_WM8974 = lib.mkForce no;
      SND_SOC_WM8978 = lib.mkForce no;
      SND_SOC_WM8985 = lib.mkForce no;
      SND_SOC_WSA881X = lib.mkForce no;
      SND_SOC_WSA883X = lib.mkForce no;
      SND_SOC_WSA884X = lib.mkForce no;
      SND_SOC_XILINX_AUDIO_FORMATTER = lib.mkForce no;
      SND_SOC_XILINX_I2S = lib.mkForce no;
      SND_SOC_XILINX_SPDIF = lib.mkForce no;
      SND_SOC_XTFPGA_I2S = lib.mkForce no;
      SND_SOC_ZL38060 = lib.mkForce no;
      SND_SONICVIBES = lib.mkForce no;
      SND_SST_ATOM_HIFI2_PLATFORM_PCI = lib.mkForce no;
      SND_TEST_COMPONENT = lib.mkForce no;
      SND_TRIDENT = lib.mkForce no;
      SND_USB_6FIRE = lib.mkForce no;
      SND_USB_CAIAQ = lib.mkForce no;
      SND_USB_HIFACE = lib.mkForce no;
      SND_USB_POD = lib.mkForce no;
      SND_USB_PODHD = lib.mkForce no;
      SND_USB_TONEPORT = lib.mkForce no;
      SND_USB_VARIAX = lib.mkForce no;
      SND_VIA82XX = lib.mkForce no;
      SND_VIA82XX_MODEM = lib.mkForce no;
      SND_VIRMIDI = lib.mkForce no;
      SND_VIRTUOSO = lib.mkForce no;
      SND_VX222 = lib.mkForce no;
      SND_YMFPCI = lib.mkForce no;

      SND_USB_CAIAQ_INPUT = lib.mkForce unset;
      SND_AC97_POWER_SAVE = lib.mkForce unset;
      SND_AC97_POWER_SAVE_DEFAULT = lib.mkForce unset;
      SND_SOC_SOF_HDA_LINK = lib.mkForce unset;
      SND_SOC_SOF_HDA_AUDIO_CODEC = lib.mkForce unset;
      SND_SOC_INTEL_SOUNDWIRE_SOF_MACH = lib.mkForce unset;
    };
  };

  localmod-unused-video = with lib.kernel; {
    name = "localmod-unused-video";
    patch = null;
    extraStructuredConfig = {
      VIDEO_SOLO6X10 = lib.mkForce unset;
      VIDEO_TW5864 = lib.mkForce unset;
      VIDEO_TW68 = lib.mkForce unset;
      VIDEO_TW686X = lib.mkForce unset;
      VIDEO_ZORAN = lib.mkForce unset;
      VIDEO_DT3155 = lib.mkForce unset;
      VIDEO_IVTV = lib.mkForce unset;
      VIDEO_HEXIUM_GEMINI = lib.mkForce unset;
      VIDEO_HEXIUM_ORION = lib.mkForce unset;
      VIDEO_MXB = lib.mkForce unset;
      VIDEO_BT848 = lib.mkForce unset;
      VIDEO_CX25821 = lib.mkForce unset;
      VIDEO_CX88 = lib.mkForce unset;
      VIDEO_SAA7134 = lib.mkForce unset;
      VIDEO_IPU3_CIO2 = lib.mkForce unset;
      VIDEO_INTEL_IPU6 = lib.mkForce unset;
      VIDEO_CADENCE_CSI2RX = lib.mkForce unset;
      VIDEO_CADENCE_CSI2TX = lib.mkForce unset;
      VIDEO_RP1_CFE = lib.mkForce unset;
      VIDEO_IR_I2C = lib.mkForce no;
      VIDEO_ALVIUM_CSI2 = lib.mkForce no;
      VIDEO_AR0521 = lib.mkForce no;
      VIDEO_GC0308 = lib.mkForce no;
      VIDEO_GC05A2 = lib.mkForce no;
      VIDEO_GC08A3 = lib.mkForce no;
      VIDEO_GC2145 = lib.mkForce no;
      VIDEO_HI556 = lib.mkForce no;
      VIDEO_HI846 = lib.mkForce no;
      VIDEO_HI847 = lib.mkForce no;
      VIDEO_IMX208 = lib.mkForce no;
      VIDEO_IMX214 = lib.mkForce no;
      VIDEO_IMX219 = lib.mkForce no;
      VIDEO_IMX258 = lib.mkForce no;
      VIDEO_IMX274 = lib.mkForce no;
      VIDEO_IMX283 = lib.mkForce no;
      VIDEO_IMX290 = lib.mkForce no;
      VIDEO_IMX296 = lib.mkForce no;
      VIDEO_IMX319 = lib.mkForce no;
      VIDEO_IMX334 = lib.mkForce no;
      VIDEO_IMX335 = lib.mkForce no;
      VIDEO_IMX355 = lib.mkForce no;
      VIDEO_IMX412 = lib.mkForce no;
      VIDEO_IMX415 = lib.mkForce no;
      VIDEO_MT9M001 = lib.mkForce no;
      VIDEO_MT9M111 = lib.mkForce no;
      VIDEO_MT9M114 = lib.mkForce no;
      VIDEO_MT9P031 = lib.mkForce no;
      VIDEO_MT9T112 = lib.mkForce no;
      VIDEO_MT9V011 = lib.mkForce no;
      VIDEO_MT9V032 = lib.mkForce no;
      VIDEO_MT9V111 = lib.mkForce no;
      VIDEO_OG01A1B = lib.mkForce no;
      VIDEO_OV01A10 = lib.mkForce no;
      VIDEO_OV02A10 = lib.mkForce no;
      VIDEO_OV02E10 = lib.mkForce no;
      VIDEO_OV02C10 = lib.mkForce no;
      VIDEO_OV08D10 = lib.mkForce no;
      VIDEO_OV08X40 = lib.mkForce no;
      VIDEO_OV13858 = lib.mkForce no;
      VIDEO_OV13B10 = lib.mkForce no;
      VIDEO_OV2640 = lib.mkForce no;
      VIDEO_OV2659 = lib.mkForce no;
      VIDEO_OV2680 = lib.mkForce no;
      VIDEO_OV2685 = lib.mkForce no;
      VIDEO_OV2740 = lib.mkForce no;
      VIDEO_OV4689 = lib.mkForce no;
      VIDEO_OV5640 = lib.mkForce no;
      VIDEO_OV5645 = lib.mkForce no;
      VIDEO_OV5647 = lib.mkForce no;
      VIDEO_OV5648 = lib.mkForce no;
      VIDEO_OV5670 = lib.mkForce no;
      VIDEO_OV5675 = lib.mkForce no;
      VIDEO_OV5693 = lib.mkForce no;
      VIDEO_OV5695 = lib.mkForce no;
      VIDEO_OV64A40 = lib.mkForce no;
      VIDEO_OV6650 = lib.mkForce no;
      VIDEO_OV7251 = lib.mkForce no;
      VIDEO_OV7640 = lib.mkForce no;
      VIDEO_OV7670 = lib.mkForce no;
      VIDEO_OV772X = lib.mkForce no;
      VIDEO_OV7740 = lib.mkForce no;
      VIDEO_OV8856 = lib.mkForce no;
      VIDEO_OV8858 = lib.mkForce no;
      VIDEO_OV8865 = lib.mkForce no;
      VIDEO_OV9282 = lib.mkForce no;
      VIDEO_OV9640 = lib.mkForce no;
      VIDEO_OV9650 = lib.mkForce no;
      VIDEO_OV9734 = lib.mkForce no;
      VIDEO_RDACM20 = lib.mkForce no;
      VIDEO_RDACM21 = lib.mkForce no;
      VIDEO_RJ54N1 = lib.mkForce no;
      VIDEO_S5C73M3 = lib.mkForce no;
      VIDEO_S5K5BAF = lib.mkForce no;
      VIDEO_S5K6A3 = lib.mkForce no;
      VIDEO_VD55G1 = lib.mkForce no;
      VIDEO_VD56G3 = lib.mkForce no;
      VIDEO_VGXY61 = lib.mkForce no;
      VIDEO_CCS = lib.mkForce no;
      VIDEO_ET8EK8 = lib.mkForce no;
      VIDEO_THP7312 = lib.mkForce no;
      VIDEO_AD5820 = lib.mkForce no;
      VIDEO_AK7375 = lib.mkForce no;
      VIDEO_DW9714 = lib.mkForce no;
      VIDEO_DW9719 = lib.mkForce no;
      VIDEO_DW9768 = lib.mkForce no;
      VIDEO_DW9807_VCM = lib.mkForce no;
      VIDEO_ADP1653 = lib.mkForce no;
      VIDEO_LM3560 = lib.mkForce no;
      VIDEO_LM3646 = lib.mkForce no;
      VIDEO_SONY_BTF_MPX = lib.mkForce no;
      VIDEO_TDA1997X = lib.mkForce no;
      VIDEO_TDA7432 = lib.mkForce no;
      VIDEO_TDA9840 = lib.mkForce no;
      VIDEO_TEA6415C = lib.mkForce no;
      VIDEO_TEA6420 = lib.mkForce no;
      VIDEO_TLV320AIC23B = lib.mkForce no;
      VIDEO_TVAUDIO = lib.mkForce no;
      VIDEO_UDA1342 = lib.mkForce no;
      VIDEO_VP27SMPX = lib.mkForce no;
      VIDEO_WM8739 = lib.mkForce no;
      VIDEO_SAA6588 = lib.mkForce no;
      VIDEO_ADV7180 = lib.mkForce no;
      VIDEO_ADV7183 = lib.mkForce no;
      VIDEO_ADV748X = lib.mkForce no;
      VIDEO_ADV7604 = lib.mkForce no;
      VIDEO_ADV7842 = lib.mkForce no;
      VIDEO_BT819 = lib.mkForce no;
      VIDEO_BT856 = lib.mkForce no;
      VIDEO_BT866 = lib.mkForce no;
      VIDEO_ISL7998X = lib.mkForce no;
      VIDEO_LT6911UXE = lib.mkForce no;
      VIDEO_KS0127 = lib.mkForce no;
      VIDEO_ML86V7667 = lib.mkForce no;
      VIDEO_SAA7110 = lib.mkForce no;
      VIDEO_TC358743 = lib.mkForce no;
      VIDEO_TC358746 = lib.mkForce no;
      VIDEO_TVP514X = lib.mkForce no;
      VIDEO_TVP5150 = lib.mkForce no;
      VIDEO_TVP7002 = lib.mkForce no;
      VIDEO_TW2804 = lib.mkForce no;
      VIDEO_TW9900 = lib.mkForce no;
      VIDEO_TW9903 = lib.mkForce no;
      VIDEO_TW9906 = lib.mkForce no;
      VIDEO_TW9910 = lib.mkForce no;
      VIDEO_VPX3220 = lib.mkForce no;
      VIDEO_SAA717X = lib.mkForce no;
      VIDEO_ADV7170 = lib.mkForce no;
      VIDEO_ADV7175 = lib.mkForce no;
      VIDEO_ADV7343 = lib.mkForce no;
      VIDEO_ADV7393 = lib.mkForce no;
      VIDEO_AK881X = lib.mkForce no;
      VIDEO_SAA7127 = lib.mkForce no;
      VIDEO_SAA7185 = lib.mkForce no;
      VIDEO_THS8200 = lib.mkForce no;
      VIDEO_UPD64031A = lib.mkForce no;
      VIDEO_UPD64083 = lib.mkForce no;
      VIDEO_SAA6752HS = lib.mkForce no;
      SDR_MAX2175 = lib.mkForce no;
      VIDEO_I2C = lib.mkForce no;
      VIDEO_M52790 = lib.mkForce no;
      VIDEO_ST_MIPID02 = lib.mkForce no;
      VIDEO_THS7303 = lib.mkForce no;
      VIDEO_DS90UB913 = lib.mkForce no;
      VIDEO_DS90UB953 = lib.mkForce no;
      VIDEO_DS90UB960 = lib.mkForce no;
      VIDEO_MAX96714 = lib.mkForce no;
      VIDEO_MAX96717 = lib.mkForce no;
      VIDEO_GS1662 = lib.mkForce no;
      VIDEO_GO7007 = lib.mkForce no;
      VIDEO_HDPVR = lib.mkForce no;
      VIDEO_STK1160 = lib.mkForce no;
      VIDEO_EM28XX = lib.mkForce no;      

      # cleanups
      VIDEO_ADV7511 = lib.mkForce unset;
      VIDEO_CS3308 = module;
      VIDEO_CS5345 = module;
      VIDEO_CS53L32A = module;
      VIDEO_CX25840 = module;
      VIDEO_MSP3400 = module;
      VIDEO_SAA711X = module;
      VIDEO_WM8775 = module;

    };
  };

  localmod-unused-wifi = {
    name = "localmod-unused-wifi";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      WLAN_VENDOR_ADMTEK = yes;
      WLAN_VENDOR_ATH = lib.mkForce no;
      WLAN_VENDOR_ATMEL = lib.mkForce no;
      WLAN_VENDOR_BROADCOM = lib.mkForce no;
      WLAN_VENDOR_INTEL = yes;
      WLAN_VENDOR_INTERSIL = lib.mkForce no;
      WLAN_VENDOR_MARVELL = lib.mkForce no;
      WLAN_VENDOR_MEDIATEK = lib.mkForce no;
      WLAN_VENDOR_MICROCHIP = lib.mkForce no;
      WLAN_VENDOR_PURELIFI = lib.mkForce no;
      WLAN_VENDOR_QUANTENNA = lib.mkForce no;
      WLAN_VENDOR_RALINK = lib.mkForce no;
      WLAN_VENDOR_REALTEK = lib.mkForce no;
      WLAN_VENDOR_RSI = lib.mkForce no;
      WLAN_VENDOR_SILABS = lib.mkForce no;
      WLAN_VENDOR_ST = lib.mkForce no;
      WLAN_VENDOR_TI = lib.mkForce no;
      WLAN_VENDOR_ZYDAS = lib.mkForce no;

      # fallout
      RT2800USB_RT53XX = lib.mkForce unset;
      RT2800USB_RT55XX = lib.mkForce unset;
      RTW88 = lib.mkForce unset;
      RTW88_8822BE = lib.mkForce unset;
      RTW88_8822CE = lib.mkForce unset;
    };
  };

  # Options I don't want turned off on some hardware
  g14 = {
    name = "g14";
    patch = null;
    extraStructuredConfig = with lib.kernel; {
      # ACPI_TINY_POWER_BUTTON = yes; # reports already set
      NR_CPUS = lib.mkForce (freeform "16");
      CPU_SUP_AMD = lib.mkForce yes;
    };
  };
}
